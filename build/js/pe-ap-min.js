/*!
 * Web Experience Toolkit (WET) / Boîte à outils de l'expérience Web (BOEW)
 * www.tbs.gc.ca/ws-nw/wet-boew/terms / www.sct.gc.ca/ws-nw/wet-boew/conditions
 */
(function(c){var a,b;a=(typeof window.pe!=="undefined"&&window.pe!==null)?window.pe:{fn:{}};b={language:(c("html").attr("lang").length>0?c("html").attr("lang"):"en"),touchscreen:"ontouchstart" in document.documentElement,theme:"",suffix:c('body script[src*="/pe-ap-min.js"]').length>0?"-min":"",header:c("#wb-head"),main:c("#wb-main"),secnav:c("#wb-sec"),footer:c("#wb-foot"),urlquery:"",html5:(function(){var d=false,e=/\s+(X?HTML)\s+([\d\.]+)\s*([^\/]+)*\//gi;if(typeof document.namespaces!=="undefined"){d=(document.all[0].nodeType===8)?e.test(document.all[0].nodeValue):false}else{d=(document.doctype!==null)?e.test(document.doctype.publicId):false}return(d)?false:true}()),ie:c.browser.msie?c.browser.version:0,_init:function(){var g,f,l,e,d,k,h;c("html").removeClass("no-js").addClass(a.theme+((a.touchscreen)?" touchscreen":""));a.urlquery=a.url(document.location).params;l=a.main.find("a[href*='#']");d=l.filter(":not([href^='#'])");e=l.filter("[href^='#']");if(a.mobilecheck()){a.mobile=true;c("body > div").attr("data-role","page");c(document).on("mobileinit",function(){c.extend(c.mobile,{ajaxEnabled:false,pushStateEnabled:false,autoInitializePage:false})});d.each(function(){var m=a.url(k.attr("href"));k=c(this);if((k.attr("data-replace-hash")===undefined&&(m.hash.length>0&&window.location.hostname===m.host))||(k.attr("data-replace-hash")!==undefined&&k.attr("data-replace-hash")===true)){k.attr("href",m.removehash()+(m.params.length>0?"&amp;":"?")+"hashtarget="+m.hash)}});c(document).on("pageinit",function(){e.off("click vclick").on("click vclick",function(){k=c(c(this).attr("href"));k.filter(":not(a, button, input, textarea, select)").attr("tabindex","-1");if(k.length>0){c.mobile.silentScroll(a.focus(k).offset().top)}});if(a.urlquery.hashtarget!==undefined){h=a.main.find("#"+a.urlquery.hashtarget);h.filter(":not(a, button, input, textarea, select)").attr("tabindex","-1");if(h.length>0){setTimeout(function(){c.mobile.silentScroll(a.focus(h).offset().top)},0)}}});a.add.css([a.add.themecsslocation+"jquery.mobile"+a.suffix+".css"]);a.add._load([a.add.liblocation+"jquery.mobile/jquery.mobile.min.js"])}else{e.on("click vclick",function(){k=c(c(this).attr("href"));k.filter(":not(a, button, input, textarea, select)").attr("tabindex","-1");if(k.length>0){a.focus(k)}});if(window.location.hash.length>0){k=c(window.location.hash);k.filter(":not(a, button, input, textarea, select)").attr("tabindex","-1");if(k.length>0){a.focus(k)}}}c.when.apply(c,c.map(c("*[data-ajax-replace], *[data-ajax-append]"),function(p){f=c(p);var n=false,m;if(f.attr("data-ajax-replace")!==undefined){n=true;m=f.attr("data-ajax-replace")}else{if(f.attr("data-ajax-append")!==undefined){m=f.attr("data-ajax-append")}}return c.get(m,function(o){if(n){f.empty()}f.append(c(o))},"html")})).always(function(){c(document).on("languageloaded",function(){if(wet_boew_theme!==null){wet_boew_theme.init();if(a.mobile===true){if(wet_boew_theme!==null){wet_boew_theme.mobileview()}c.mobile.initializePage()}}a.dance()});a.add.language(a.language)});a.polyfills()},depends:{_ind:[],is:function(d){return -1!==c.inArray(d,a.depends._ind)},put:function(d){a.depends._ind[a.depends._ind.length]=d},on:(function(){c(document).on("wet-boew-dependency-loaded",function(){var e,f;for(e=0,f=a.depends.on.length;e<f;e+=1){a.depends.on[e](e)}});return[]}())},mobile:false,mobilecheck:function(){return(window.innerWidth<768&&!(a.ie>0&&a.ie<9))},pagecontainer:function(){return c("#wb-body-sec-sup,#wb-body-sec,#wb-body").add("body").eq(0)},parameter:function(d,e){return(a.html5)?e.data(d):e.attr("class").replace("/.*"+d+"-([a-z0-9_]+).*/i","$1")},resize:function(d){ResizeEvents.initialise();ResizeEvents.eventElement.bind("x-text-resize x-zoom-resize x-window-resize",function(){d()});return},url:function(e){var d;d=document.createElement("a");d.href=e;return{source:d.href,protocol:d.protocol.replace(":",""),host:d.hostname,port:d.port==="0"?"80":d.port,query:d.search,params:(function(){var k,h,l,g,m,f;h={};g=d.search.replace(/^\?/,"").split("&");for(m=0,f=g.length;m<f;m+=1){k=g[m];if(k){l=k.split("=");h[l[0]]=l[1]}}return h}()),file:d.pathname.match(/\/([^\/?#]+)$/i)?d.pathname.match(/\/([^\/?#]+)$/i)[1]:"",hash:d.hash.replace("#",""),path:d.pathname.replace(/^([^\/])/,"/$1"),relative:d.href.match(/tps?:\/\/[^\/]+(.+)/)?d.href.match(/tps?:\/\/[^\/]+(.+)/)[1]:"",segments:d.pathname.replace(/^\//,"").split("/"),removehash:function(){return this.source.replace(/#([A-Za-z0-9-_=&]+)/,"")}}},_execute:function(e,f){var d=(typeof e._exec!=="undefined")?e._exec:e.exec;if(typeof e.depends!=="undefined"){a.add.js(e.depends,function(){d(f)})}else{d(f)}return},cssenabled:function(){return c("link").get(0).disabled},limit:function(e){var d;d=c(e).attr("class").match(/\blimit-\d+/);if(!d){return 0}return Number(d[0].replace(/limit-/i,""))},focus:function(d){setTimeout(function(){return(typeof d.jquery!=="undefined"?d.focus():c(d).focus())},0);return d},string:{ify:(function(){return{link:function(d){return d.replace(/[a-z]+:\/\/[a-z0-9-_]+\.[a-z0-9-_@:~%&\?\+#\/.=]+[^:\.,\)\s*$]/ig,function(e){return'<a href="'+e+'">'+((e.length>25)?e.substr(0,24)+"...":e)+"</a>"})},at:function(d){return d.replace(/(^|[^\w]+)\@([a-zA-Z0-9_]{1,15}(\/[a-zA-Z0-9-_]+)*)/g,function(e,g,f){return g+'@<a href="http://twitter.com/'+f+'">'+f+"</a>"})},hash:function(d){return d.replace(/(^|[^&\w'"]+)\#([a-zA-Z0-9_]+)/g,function(e,g,f){return g+'#<a href="http://search.twitter.com/search?q=%23'+f+'">'+f+"</a>"})},clean:function(d){return this.hash(this.at(this.link(d)))}}}()),pad:function(e,d){var f;f=String(e);while(f.length<d){f="0"+f}return f}},date:{convert:function(e){if(e.constructor===Date){return e}if(e.constructor===Array){return new Date(e[0],e[1],e[2])}if(e.constructor===Number){return new Date(e)}if(e.constructor===String){return new Date(e)}if(typeof e==="object"){return new Date(e.year,e.month,e.date)}return NaN},compare:function(e,d){if(isFinite(e=this.convert(e).valueOf())&&isFinite(d=this.convert(d).valueOf())){return(e>d)-(e<d)}return NaN},in_range:function(f,g,e){if(isFinite(f=this.convert(f).valueOf())&&isFinite(g=this.convert(g).valueOf())&&isFinite(e=this.convert(e).valueOf())){return g<=f&&f<=e}return NaN},to_iso_format:function(g,f){var e;e=this.convert(g);if(f){return e.getFullYear()+"-"+a.string.pad(e.getMonth()+1,2,"0")+"-"+a.string.pad(e.getDate(),2,"0")+" "+a.string.pad(e.getHours(),2,"0")+":"+a.string.pad(e.getMinutes(),2,"0")}return e.getFullYear()+"-"+a.string.pad(e.getMonth()+1,2,"0")+"-"+a.string.pad(e.getDate(),2,"0")}},menu:{navcurrent:function(d,m,e){var o,l,p,h,f=a.url(window.location.href).removehash(),n=[],g=[],k;d=(typeof d.jquery!=="undefined"?d:c(d));m=c((typeof m.jquery!=="undefined"?m:c(m)).find("a").get().reverse());e=(typeof e==="undefined")?"nav-current":e;m.each(function(q){n[q]=c(this).attr("href");g[q]=c(this).text()});c(d.find("a").get().reverse()).each(function(){o=c(this);l=o.attr("href");p=o.text();k=(l===f);for(h=0;!k&&h<n.length;h+=1){if(n[h]!=="#"&&(n[h]===l||g[h]===p)){k=true;break}}if(k){o.addClass(e);return false}});return(k?o:c())},buildmobile:function(d,o,h,l){var e=c('<div data-role="controlgroup"></div>'),g=(typeof d.jquery!=="undefined"?d:c(d)).find("> div, > ul, h"+o),k,f,n,m;if(g.first().is("ul")){e.append(c('<ul data-role="listview" data-theme="'+h+'"></ul>').append(g.first().children("li")))}else{g.each(function(p){var q=c(this);if(q.is("h"+o)){n=q.children("a");f=c('<div data-role="collapsible"'+(n.hasClass("nav-current")?' data-collapsed="false"':"")+"><h"+o+">"+q.text()+"</h"+o+"></div>");if(l){q=q.parent().find("a").eq(1).closest("ul, div, h"+o+1).first();k=q}else{k=q.next()}if(k.is("ul")){if(!l){k.append(c("<li></li>").append(q.children("a").html(a.dic.get("%all")+" - "+n.html())))}m=k.find("li ul");m.each(function(r){var s=c(this);n=s.prev("a");if((o+1+r)<7){s.attr("data-role","listview").attr("data-theme",h).wrap('<div data-role="collapsible"></div>');s.parent().prepend("<h"+(o+1+r)+">"+n.html()+"</h"+(o+1+r)+">");s.append('<li><a href="'+n.attr("href")+'">'+a.dic.get("%all")+" - "+n.html()+"</a></li>");n.remove()}else{s.attr("data-role","listview").attr("data-theme",h)}});f.append(c('<ul data-role="listview" data-theme="'+h+'"></ul>').append(k.children("li")));f.find("ul").wrap('<div data-role="controlgroup">'+(m.length>0?'<div data-role="collapsible-set" data-theme="'+h+'"></div>':"")+"</div>")}else{f.append(a.menu.buildmobile(q.parent(),o+1,h));if(!l){f.find('div[data-role="collapsible-set"]').eq(0).append(q.children("a").html(a.dic.get("%all")+" - "+n.html()).attr("data-role","button").attr("data-theme",h).attr("data-icon","arrow-r").attr("data-iconpos","right"))}}e.append(f)}else{if(q.is("div")){e.append(q.children("a").attr("data-role","button").attr("data-theme",h).attr("data-icon","arrow-r").attr("data-iconpos","right"))}}});e.children().wrapAll('<div data-role="collapsible-set" data-theme="'+h+'"></div>')}return e},expandmobile:function(e,d){c((typeof e.jquery!=="undefined"?e:c(e))).find((typeof d==="undefined")?".nav-current":d).parents('div[data-role="collapsible"]').attr("data-collapsed","false")},correctmobile:function(d){c((typeof d.jquery!=="undefined"?d:c(d))).find(".ui-collapsible-set").each(function(){var e=c(this);if(e.find("> ul .ui-collapsible").length>0){e=e.children("ul")}e.children().each(function(){var g=c(this),f=g.is("a")?g:g.find("a").first();if(g.prev().length>0){f.removeClass("ui-corner-top")}if(g.next().length>0){f.removeClass("ui-corner-bottom")}})})}},polyfills:function(){var e=a.add.liblocation,d=(function(l){var h=l.createElement("details"),g,f,k;if(typeof h.open==="undefined"){return false}f=l.body||(function(){var m=l.documentElement;g=true;return m.insertBefore(l.createElement("body"),m.firstElementChild||m.firstChild)}());h.innerHTML="<summary>a</summary>b";h.style.display="block";f.appendChild(h);k=h.offsetHeight;h.open=true;k=k!==h.offsetHeight;f.removeChild(h);if(g){f.parentNode.removeChild(f)}return k}(document));if(!window.localStorage){a.add._load(e+"polyfills/localstorage"+a.suffix+".js")}if(typeof document.createElement("progress").position==="undefined"){a.add._load(e+"polyfills/progress"+a.suffix+".js")}if(!d){a.add._load(e+"polyfills/detailsummary"+a.suffix+".js")}},add:(function(){return{head:document.head||document.getElementsByTagName("head"),liblocation:(function(){var d=c('body script[src*="/pe-ap"]').attr("src");return d.substr(0,d.lastIndexOf("/")+1)}()),themecsslocation:(function(){var d=c('head link[rel="stylesheet"][href*="'+wet_boew_theme.themename()+'"]');return d.length>0?d.attr("href").substr(0,d.attr("href").lastIndexOf("/")+1):"theme-not-found/"}()),staged:[],_load:function(f,e){var d=a.add.head,g=(e!==undefined?e:"wet-boew-dependency-loaded");if(c.inArray(f,this.staged)>-1){return this}setTimeout(function(){if(typeof d.item!=="undefined"){if(!d[0]){setTimeout(arguments.callee,25);return}d=d[0]}var h=document.createElement("script"),k=false;a.add.set(h,"async","async");h.onload=h.onreadystatechange=function(){if((h.readyState&&h.readyState!=="complete"&&h.readyState!=="loaded")||k){return false}h.onload=h.onreadystatechange=null;k=true;a.depends.put(f);c(document).trigger({type:g,js:f})};h.src=f;if((a.ie>0&&a.ie<9)||!d.insertBefore){c(h).appendTo(c(d)).delay(100)}else{d.insertBefore(h,d.firstChild)}},0);this.staged[this.staged.length]=f;return this},set:function(f,d,e){f.setAttribute(d,e);return this},css:function(f){var e=a.add.head,d=document.createElement("link");a.add.set(d,"rel","stylesheet").set(d,"href",f);if((a.ie>0&&a.ie<10)||!e.insertBefore){c(d).appendTo(c(e)).attr("href",f)}else{e.insertBefore(d,e.firstChild)}return this},depends:function(g){var f=a.add.liblocation,e=c.map(g,function(d){return(/^http(s)?/i.test(d))?d:f+"dependencies/"+d+a.suffix+".js"});return e},language:function(e){var d=a.add.liblocation+"i18n/"+e+a.suffix+".js";a.add._load(d)},js:function(f,e){var d;f=a.add.depends(f);for(d=0;d<f.length;d+=1){if(!a.depends.is(f[d])){a.add._load(f[d])}}a.depends.on[a.depends.on.length]=function(g){var h=true;for(d=0;d<f.length;d+=1){if(!a.depends.is(f[d])){h=false}}if(h){a.depends.on[g]=function(){};e()}};c(document).trigger("wet-boew-dependency-loaded");return this},meta:function(e,f){var d;d=document.createElement("meta");a.add.set(d,"name",e).set(d,"content",f);a.add.head.appendChild(d);return this}}}()),dance:function(){var d,e=(typeof wet_boew_properties!=="undefined"&&wet_boew_properties!==null)?wet_boew_properties:false;c('[class^="wet-boew-"]').each(function(){var g=c(this),h=g.attr("class").split(" "),f;for(f=0;f<h.length;f+=1){if(h[f].indexOf("wet-boew-")===0){h[f]=h[f].substr(9).toLowerCase();if(typeof a.fn[h[f]]!=="undefined"){a._execute(a.fn[h[f]],g)}}}});if(e){for(d=0;d<e.globals.length;d+=1){a._execute(a.fn[e.globals[d]],document)}}window.onresize=function(){if(a.mobile!==a.mobilecheck()){window.location.href=a.url(window.location.href).removehash()}}}};window.pe=c.extend(true,a,b);return window.pe}(jQuery))._init();(function(b){var a=window.pe||{fn:{}};a.fn.archived={type:"plugin",_exec:function(d){if(pe.mobile){return}var c=b('<div class="archived" role="toolbar"><a class="archived-top-page" href="#archived" role="link">'+pe.dic.get("%archived-page")+"</a></div>");b(window).on("scroll",function(){if(b(this).scrollTop()>10){c.fadeIn("normal").attr("aria-hidden","false")}else{c.fadeOut("normal").attr("aria-hidden","true")}});if(b(window).scrollTop()<10||b(window).scrollTop()==="undefined"){c.fadeOut("normal").attr("aria-hidden","true")}else{c.fadeIn("normal").attr("aria-hidden","false")}pe.pagecontainer().append(c)}};window.pe=a;return a}(jQuery));(function(b){var a=window.pe||{fn:{}};a.fn.charts={type:"plugin",depends:["raphael"],_exec:function(k){function d(n){var o={aliceblue:"#f0f8ff",antiquewhite:"#faebd7",aqua:"#00ffff",aquamarine:"#7fffd4",azure:"#f0ffff",beige:"#f5f5dc",bisque:"#ffe4c4",black:"#000000",blanchedalmond:"#ffebcd",blue:"#0000ff",blueviolet:"#8a2be2",brown:"#a52a2a",burlywood:"#deb887",cadetblue:"#5f9ea0",chartreuse:"#7fff00",chocolate:"#d2691e",coral:"#ff7f50",cornflowerblue:"#6495ed",cornsilk:"#fff8dc",crimson:"#dc143c",cyan:"#00ffff",darkblue:"#00008b",darkcyan:"#008b8b",darkgoldenrod:"#b8860b",darkgray:"#a9a9a9",darkgreen:"#006400",darkkhaki:"#bdb76b",darkmagenta:"#8b008b",darkolivegreen:"#556b2f",darkorange:"#ff8c00",darkorchid:"#9932cc",darkred:"#8b0000",darksalmon:"#e9967a",darkseagreen:"#8fbc8f",darkslateblue:"#483d8b",darkslategray:"#2f4f4f",darkturquoise:"#00ced1",darkviolet:"#9400d3",deeppink:"#ff1493",deepskyblue:"#00bfff",dimgray:"#696969",dodgerblue:"#1e90ff",firebrick:"#b22222",floralwhite:"#fffaf0",forestgreen:"#228b22",fuchsia:"#ff00ff",gainsboro:"#dcdcdc",ghostwhite:"#f8f8ff",gold:"#ffd700",goldenrod:"#daa520",gray:"#808080",green:"#008000",greenyellow:"#adff2f",honeydew:"#f0fff0",hotpink:"#ff69b4","indianred ":"#cd5c5c","indigo ":"#4b0082",ivory:"#fffff0",khaki:"#f0e68c",lavender:"#e6e6fa",lavenderblush:"#fff0f5",lawngreen:"#7cfc00",lemonchiffon:"#fffacd",lightblue:"#add8e6",lightcoral:"#f08080",lightcyan:"#e0ffff",lightgoldenrodyellow:"#fafad2",lightgrey:"#d3d3d3",lightgreen:"#90ee90",lightpink:"#ffb6c1",lightsalmon:"#ffa07a",lightseagreen:"#20b2aa",lightskyblue:"#87cefa",lightslategray:"#778899",lightsteelblue:"#b0c4de",lightyellow:"#ffffe0",lime:"#00ff00",limegreen:"#32cd32",linen:"#faf0e6",magenta:"#ff00ff",maroon:"#800000",mediumaquamarine:"#66cdaa",mediumblue:"#0000cd",mediumorchid:"#ba55d3",mediumpurple:"#9370d8",mediumseagreen:"#3cb371",mediumslateblue:"#7b68ee",mediumspringgreen:"#00fa9a",mediumturquoise:"#48d1cc",mediumvioletred:"#c71585",midnightblue:"#191970",mintcream:"#f5fffa",mistyrose:"#ffe4e1",moccasin:"#ffe4b5",navajowhite:"#ffdead",navy:"#000080",oldlace:"#fdf5e6",olive:"#808000",olivedrab:"#6b8e23",orange:"#ffa500",orangered:"#ff4500",orchid:"#da70d6",palegoldenrod:"#eee8aa",palegreen:"#98fb98",paleturquoise:"#afeeee",palevioletred:"#d87093",papayawhip:"#ffefd5",peachpuff:"#ffdab9",peru:"#cd853f",pink:"#ffc0cb",plum:"#dda0dd",powderblue:"#b0e0e6",purple:"#800080",red:"#ff0000",rosybrown:"#bc8f8f",royalblue:"#4169e1",saddlebrown:"#8b4513",salmon:"#fa8072",sandybrown:"#f4a460",seagreen:"#2e8b57",seashell:"#fff5ee",sienna:"#a0522d",silver:"#c0c0c0",skyblue:"#87ceeb",slateblue:"#6a5acd",slategray:"#708090",snow:"#fffafa",springgreen:"#00ff7f",steelblue:"#4682b4",tan:"#d2b48c",teal:"#008080",thistle:"#d8bfd8",tomato:"#ff6347",turquoise:"#40e0d0",violet:"#ee82ee",wheat:"#f5deb3",white:"#ffffff",whitesmoke:"#f5f5f5",yellow:"#ffff00",yellowgreen:"#9acd32"};return(typeof o[n.toLowerCase()]!="undefined"?o[n.toLowerCase()]:(b.isArray(e.colors)?e.colors[0]:e.colors))}options={};var e=b.extend({"default-namespace":"wb-charts","graphclass-autocreate":true,"graphclass-overwrite-array-mode":true,"graphclass-typeof":"string","hide-autocreate":true,"topvalue-autocreate":true,"topvalue-typeof":"number","topvaluenegative-autocreate":true,"topvaluenegative-typeof":"boolean","bottomvalue-autocreate":true,"bottomvalue-typeof":"number","bottomvaluenegative-autocreate":true,"bottomvaluenegative-typeof":"boolean","nocutaxis-autocreate":true,"nocutaxis-typeof":"boolean","steps-autocreate":true,"steps-typeof":"number","decimal-autocreate":true,"decimal-typeof":"number",serie:{type:"line",color:"blue"},serie2dAxis:{dasharray:"",fillopacity:100},heading2dAxis:{fill:"white",fillover:"blue",foreground:"black",foregroundover:"red"},"default-option":"type",type:"bar","type-autocreate":true,"endcaption-autocreate":true,"endcaption-typeof":"boolean",generateids:true,"generateids-typeof":"boolean",optionsClass:{"default-option":"type","type-autocreate":true,"color-autocreate":true,"overcolor-autocreate":true,"default-namespace":"wb-graph","dasharray-autocreate":true,"hide-autocreate":true,"fillopacity-autocreate":true,"fillopacity-typeof":"number"},width:b(k).width(),"width-typeof":"number",height:b(k).height(),"height-typeof":"number",maxwidth:"590","maxwidth-typeof":"number",widthPadding:2,colors:["#be1e2d","#666699","#92d5ea","#ee8310","#8d10ee","#5a3b16","#26a4ed","#f45a90","#e9e744"],textColors:[],parseDirection:"x",drawDirection:"x",pieMargin:20,pieLabelsAsPercent:true,pieLabelPos:"inside",lineWeight:4,barGroupMargin:10,barMargin:1,font:{height:20,width:10,size:14},axis:{top:{tick:null,lenght:null,padding:null},right:{tick:null,lenght:null,padding:null},bottom:{tick:null,lenght:null,padding:null},left:{tick:null,lenght:null,padding:null},tick:true,lenght:4,padding:4,minNbIncrementStep:6}},options);var m=b(k);var g=new Date().getTime();var h={};h.circleGraph={height:undefined,width:undefined,offset:{top:undefined,right:undefined,bottom:undefined,left:undefined},sizeMode:"minimal",maxWidth:600,minWidth:150,strokeWidth:3,minLevelWidth:25,levelPadding:10,nbPieByRow:undefined,props:{minWidth:100,minLevelWidth:50},captionFontSize:20,fontSize:10,piePadding:10,graphPadding:10,pieByRow:undefined,minPieWidth:undefined,graphTitle:undefined,legendContainer:undefined,paperContainer:undefined,paper:undefined,paperDOM:undefined,series:{},options:{},legendContainer:undefined,init:function(o,v){h.circleGraph.width=undefined;h.circleGraph.minWidth=150;h.circleGraph.minLevelWidth=25;h.circleGraph.levelPadding=10;h.circleGraph.series=o;h.circleGraph.options=v;h.circleGraph.width=h.circleGraph.options.width;var r=1;h.circleGraph.pieByRow=r;var s=h.circleGraph.series.nbColLevel-1;var u=(s*((h.circleGraph.minLevelWidth*2)+(h.circleGraph.levelPadding*2))+(s*(h.circleGraph.strokeWidth*2)));var t=h.circleGraph.minWidth+(h.circleGraph.levelPadding*2)+(h.circleGraph.strokeWidth*2);var n=u+t;if(!h.circleGraph.width||n>h.circleGraph.width){h.circleGraph.width=n}else{var p=h.circleGraph.minWidth/n;var q=h.circleGraph.minLevelWidth/n;h.circleGraph.minWidth=Math.floor(p*(h.circleGraph.width));h.circleGraph.minLevelWidth=Math.floor(q*(h.circleGraph.width))}h.circleGraph.height=h.circleGraph.width},generateGraph:function(r,n){h.circleGraph.paperContainer=r;h.circleGraph.paper=n;var s=1;var v=1;var o=0;var p=0;var t=[];var q=false;var u;b.each(h.circleGraph.series.series,function(){q=false;var B=b("<ul>").appendTo((b.isArray(h.circleGraph.paperContainer)?b(h.circleGraph.paperContainer[v-1]):h.circleGraph.paperContainer));h.circleGraph.legendContainer=B;var A=(b.isArray(h.circleGraph.paper)?h.circleGraph.paper[v-1]:h.circleGraph.paper);v++;if(s>=(h.circleGraph.pieByRow*(v+1))){o=0}var I=0;var L=false;b.each(this.cell,function(){if(this.value<0){L=true}if(h.circleGraph.options.decimal){this.value=Math.floor(this.value*Math.pow(10,h.circleGraph.options.decimal))}I+=this.value});if(L){alert("This series are invalid, only positive number are acceptable")}var E=(h.circleGraph.width/2)+(h.circleGraph.width*o),D=(h.circleGraph.width/2)+(h.circleGraph.width*o);var x=undefined,M="#000";var z=0,C=90,H=Math.PI/180,G=undefined,y=500;function K(P,N){var O=(h.circleGraph.minWidth/2)+h.circleGraph.strokeWidth+h.circleGraph.levelPadding+(h.circleGraph.series.nbColLevel-P-N-1)*(h.circleGraph.levelPadding+(h.circleGraph.strokeWidth*2)+h.circleGraph.minLevelWidth);return O}function w(O,N){return(K(O,N)+h.circleGraph.minLevelWidth+h.circleGraph.strokeWidth)}var J=h.circleGraph.series.nbColLevel;var F=[];b.each(this.cell,function(){var af=this.colPos;var T="";var N=J;var ad=[];b.each(h.circleGraph.series.heading,function(){if(this.colPos<af&&af<=(this.colPos+this.width)){if(this.level<=J&&J<=(this.level+this.height)){T=this.header;N=this.level}else{var ao={level:this.level,height:this.height,id:this.id,header:this.header,param:this.param};ad.push(ao)}}});var Y=[];Y.push("M",E,D);var ai=360*this.value/I;x=(h.circleGraph.minWidth/2);if(N<(J-1)){x+=((h.circleGraph.minLevelWidth+h.circleGraph.levelPadding+(h.circleGraph.strokeWidth*2))*((J-1)-N))}var ag=C,aj=E+x*Math.cos(-ag*H),Q=D+x*Math.sin(-ag*H);Y.push("L",aj,Q);var aa=C+ai,ah=E+x*Math.cos(-aa*H),P=D+x*Math.sin(-aa*H);G=aa;Y.push("A",x,x,0,+(aa-ag>180),0,ah,P);Y.push("z");b.each(ad,function(){var ao=this;ao.still=false;var ar=true;b.each(F,function(){if(this.id==ao.id){ao.still=true;this.still=true;ar=false;return false}});if(!this.topX1){var ap=K(this.level,this.height),aq=w(this.level,this.height);this.topX1=E+aq*Math.cos(-ag*H);this.topY1=D+aq*Math.sin(-ag*H);this.bottomX1=E+ap*Math.cos(-ag*H);this.bottomY1=D+ap*Math.sin(-ag*H);this.r1=aq;this.r2=ap;this.startAngle=ag;this.bcolor=Raphael.hsb(z,1,1);this.color=Raphael.hsb(z,0.75,1);this.start=z;z+=0.05}if(ar){this.still=true;F.push(this)}});b.each(F,function(){if(!this.still&&!this.ignoreMe){var aC=K(this.level,this.height),aD=w(this.level,this.height);var aH=E+aD*Math.cos(-ag*H);var at=D+aD*Math.sin(-ag*H);var ar=E+aC*Math.cos(-ag*H);var aA=D+aC*Math.sin(-ag*H);var ay=[];ay.push("M",this.topX1,this.topY1);ay.push("A",aD,aD,0,+(ag-this.startAngle>180),0,Math.ceil(aH),Math.ceil(at));ay.push("L",Math.ceil(ar),Math.ceil(aA));ay.push("A",aC,aC,0,+(ag-this.startAngle>180),1,Math.ceil(this.bottomX1),Math.ceil(this.bottomY1));ay.push("z");var ao=(ag-this.startAngle)/360*100;if(h.circleGraph.options.decimal){ao=ao*(Math.pow(10,h.circleGraph.options.decimal))}ao=Math.ceil(ao*1000);ao=Math.floor(ao/1000);if(h.circleGraph.options.decimal){ao=ao/(Math.pow(10,h.circleGraph.options.decimal))}var aq="90-"+this.bcolor+"-"+this.color;if(this.param.color){aq=d(this.param.color)}if(!q){var aI=b("<li></li>").appendTo(b(B));var aw=b('<span style="margin-right:7px;"></span>').appendTo(b(aI));var au=Raphael(b(aw).get(0),h.circleGraph.options.font.size,h.circleGraph.options.font.size);var ap=au.rect(2,2,h.circleGraph.options.font.size-(2*2)+(2/2),h.circleGraph.options.font.size-(2*2)+(2/2));b(aI).append(this.header);ap.attr("fill",aq)}var aB=A.path(ay).attr({fill:aq,stroke:M,"stroke-width":3,title:this.header+" ("+ao+"%)"});var aE=((ag-this.startAngle)/2)+this.startAngle;var ax=A.text(E+(aD*Math.cos(-aE*H)),D+(aD*Math.sin(-aE*H)),ao+"%").attr({fill:"#000",stroke:"none",opacity:1,"font-size":h.circleGraph.fontSize});var av=ax.getBBox();var aG=A.rect(av.x-10,av.y-10,av.width+(2*10),av.height+(2*10)).attr({fill:"#FFF",stroke:"black","stroke-width":"1",opacity:1});t.push({txt:ax,bg:aG});var az=this.start;var aF=Raphael.hsb(az,1,0.3);if(this.param.overcolor){aF=d(this.param.overcolor)}aB.mouseover(function(){aB.stop().attr({fill:aF});aG.stop().attr({"stroke-width":"3"});ax.insertAfter(u);aG.insertBefore(ax);u=ax}).mouseout(function(){aB.stop().attr({fill:aq});aG.stop().attr({"stroke-width":"1"})});aG.mouseover(function(){aB.stop().attr({fill:aF});aG.stop().attr({"stroke-width":"3"});ax.insertAfter(u);aG.insertBefore(ax);u=ax}).mouseout(function(){aB.stop().attr({fill:aq});aG.stop().attr({"stroke-width":"1"})});ax.mouseover(function(){aB.stop().attr({fill:aF});aG.stop().attr({"stroke-width":"3"});ax.insertAfter(u);aG.insertBefore(ax);u=ax}).mouseout(function(){aB.stop().attr({fill:aq});aG.stop().attr({"stroke-width":"1"})});this.ignoreMe=true}this.still=false});var ab=Raphael.hsb(z,1,1),ae=Raphael.hsb(z,0.75,1);var O=(aa-ag)/360*100;if(h.circleGraph.options.decimal){O=O*(Math.pow(10,h.circleGraph.options.decimal))}O=Math.ceil(O*1000);O=Math.floor(O/1000);if(h.circleGraph.options.decimal){O=O/(Math.pow(10,h.circleGraph.options.decimal))}var S="90-"+ab+"-"+ae;if(this.param.color){S=d(this.param.color)}var ac=A.path(Y).attr({fill:S,stroke:M,"stroke-width":3,title:T+" ("+O+"%)"});if(!q){var an=b("<li></li>").appendTo(b(B));var W=b('<span style="margin-right:7px;"></span>').appendTo(b(an));var V=Raphael(b(W).get(0),h.circleGraph.options.font.size,h.circleGraph.options.font.size);var R=V.rect(2,2,h.circleGraph.options.font.size-(2*2)+(2/2),h.circleGraph.options.font.size-(2*2)+(2/2));b(an).append(T);R.attr("fill",S)}var ak=C+(ai/2);var X=A.text(E+(x*Math.cos(-ak*H)),D+(x*Math.sin(-ak*H)),O+"%").attr({fill:"#000",stroke:"none",opacity:1,"font-size":h.circleGraph.fontSize});var U=X.getBBox();var am=A.rect(U.x-10,U.y-10,U.width+(2*10),U.height+(2*10)).attr({fill:"#FFF",stroke:"black","stroke-width":"1",opacity:1});t.push({txt:X,bg:am});var Z=z;var al=Raphael.hsb(Z,1,0.3);if(this.param.overcolor){al=d(this.param.overcolor)}ac.mouseover(function(){ac.stop().attr({fill:al});am.stop().attr({"stroke-width":"3"});X.insertAfter(u);am.insertBefore(X);u=X}).mouseout(function(){ac.stop().attr({fill:S});am.stop().attr({"stroke-width":"1"})});am.mouseover(function(){ac.stop().attr({fill:al});am.stop().attr({"stroke-width":"3"});X.insertAfter(u);am.insertBefore(X);u=X}).mouseout(function(){ac.stop().attr({fill:S});am.stop().attr({"stroke-width":"1"})});X.mouseover(function(){ac.stop().attr({fill:al});am.stop().attr({"stroke-width":"3"});X.insertAfter(u);am.insertBefore(X);u=X}).mouseout(function(){ac.stop().attr({fill:S});am.stop().attr({"stroke-width":"1"})});C+=ai;z+=0.1;s++;o++});b.each(F,function(){if(!this.ignoreMe){var aa=K(this.level,this.height),ab=w(this.level,this.height);var af=E+ab*Math.cos(-G*H);var R=D+ab*Math.sin(-G*H);var Q=E+aa*Math.cos(-G*H);var Y=D+aa*Math.sin(-G*H);var W=[];W.push("M",this.topX1,this.topY1);W.push("A",ab,ab,0,+(G-this.startAngle>180),0,Math.ceil(af),Math.ceil(R));W.push("L",Math.ceil(Q),Math.ceil(Y));W.push("A",aa,aa,0,+(G-this.startAngle>180),1,Math.ceil(this.bottomX1),Math.ceil(this.bottomY1));W.push("z");var N=(G-this.startAngle)/360*100;if(h.circleGraph.options.decimal){N=N*(Math.pow(10,h.circleGraph.options.decimal))}N=Math.ceil(N*1000);N=Math.floor(N/1000);if(h.circleGraph.options.decimal){N=N/(Math.pow(10,h.circleGraph.options.decimal))}var P="90-"+this.bcolor+"-"+this.color;if(this.param.color){P=d(this.param.color)}if(!q){var ag=b("<li></li>").appendTo(b(B));var U=b('<span style="margin-right:7px;"></span>').appendTo(b(ag));var S=Raphael(b(U).get(0),h.circleGraph.options.font.size,h.circleGraph.options.font.size);var O=S.rect(2,2,h.circleGraph.options.font.size-(2*2)+(2/2),h.circleGraph.options.font.size-(2*2)+(2/2));b(ag).append(this.header);O.attr("fill",P)}var Z=A.path(W).attr({fill:P,stroke:M,"stroke-width":3,title:this.header+" ("+N+"%)"});var ac=((G-this.startAngle)/2)+this.startAngle;var V=A.text(E+(ab*Math.cos(-ac*H)),D+(ab*Math.sin(-ac*H)),N+"%").attr({fill:"#000",stroke:"none",opacity:1,"font-size":h.circleGraph.fontSize});var T=V.getBBox();var ae=A.rect(T.x-10,T.y-10,T.width+(2*10),T.height+(2*10)).attr({fill:"#FFF",stroke:"black","stroke-width":"1",opacity:1});t.push({txt:V,bg:ae});var X=this.start;var ad=Raphael.hsb(X,1,0.3);if(this.param.overcolor){ad=d(this.param.overcolor)}Z.mouseover(function(){Z.stop().attr({fill:ad});ae.stop().attr({"stroke-width":"3"});V.insertAfter(u);ae.insertBefore(V);u=V}).mouseout(function(){Z.stop().attr({fill:P});ae.stop().attr({"stroke-width":"1"})});ae.mouseover(function(){Z.stop().attr({fill:ad});ae.stop().attr({"stroke-width":"3"});V.insertAfter(u);ae.insertBefore(V);u=V}).mouseout(function(){Z.stop().attr({fill:P});ae.stop().attr({"stroke-width":"1"})});V.mouseover(function(){Z.stop().attr({fill:ad});ae.stop().attr({"stroke-width":"3"});V.insertAfter(u);ae.insertBefore(V);u=V}).mouseout(function(){Z.stop().attr({fill:P});ae.stop().attr({"stroke-width":"1"})});this.ignoreMe=true}});u=A.rect(0,0,1,1).attr({opacity:0});b.each(t,function(){this.txt.insertAfter(u);this.bg.insertBefore(this.txt)});u=t[t.length-1].txt;t=[];q=true})}};h.graph2dAxis={drawDirection:"x",height:undefined,width:undefined,offset:{top:undefined,right:undefined,bottom:undefined,left:undefined},cuttingOffset:undefined,xAxisOffset:undefined,cuttingPosPaper:undefined,NbColumnHeading:0,NbColumnHeaderLevel:undefined,zeroPos:undefined,cuttingPos:undefined,incrementation:undefined,nbStep:undefined,layout:{headingMinSize:undefined,nbColHeading:undefined},top:undefined,bottom:undefined,graphTitle:undefined,legendContainer:undefined,paperContainer:undefined,paper:undefined,paperDOM:undefined,series:{},options:{},setNbColumnHeading:function(){h.graph2dAxis.NbColumnHeading=0;h.graph2dAxis.NbColumnHeaderLevel=0;var n=undefined;var o=[];b.each(h.graph2dAxis.series.heading,function(){if(!this.isGroup&&(this.colPos+this.width)>h.graph2dAxis.series.nbRowLevel){h.graph2dAxis.NbColumnHeading++;if(!o[this.level]||(this.header.length*h.graph2dAxis.options.font.width)>(o[this.level]*h.graph2dAxis.options.font.width)){o[this.level]=this.header.length*h.graph2dAxis.options.font.width}}if(this.level>h.graph2dAxis.NbColumnHeaderLevel||h.graph2dAxis.NbColumnHeaderLevel==undefined){h.graph2dAxis.NbColumnHeaderLevel=this.level}});h.graph2dAxis.NbColumnHeaderLevel++;n=(h.graph2dAxis.options.font.height*h.graph2dAxis.NbColumnHeaderLevel)+(h.graph2dAxis.options.axis.top.padding!=null?h.graph2dAxis.options.axis.top.padding:h.graph2dAxis.options.axis.padding);h.graph2dAxis.layout.headingMinSize=n},utils:{topRound:function(n){if(n>=0){return Math.ceil(n)}else{return Math.floor(n)}}},setHeightXLabel:function(){h.graph2dAxis.offset.top=(h.graph2dAxis.options.font.height/2);var o=Math.ceil((h.graph2dAxis.options.height-h.graph2dAxis.layout.headingMinSize)/h.graph2dAxis.options.font.height);var n=o-h.graph2dAxis.NbColumnHeaderLevel;if(n<h.graph2dAxis.options.axis.minNbIncrementStep){n=h.graph2dAxis.options.axis.minNbIncrementStep;o=h.graph2dAxis.options.axis.minNbIncrementStep+h.graph2dAxis.NbColumnHeaderLevel}h.graph2dAxis.nbStep=n;h.graph2dAxis.options.height=(h.graph2dAxis.options.font.height*o)},setLeftOffset:function(){if(h.graph2dAxis.top.toString().length>h.graph2dAxis.bottom.toString().length){h.graph2dAxis.offset.left=h.graph2dAxis.options.font.width*h.graph2dAxis.top.toString().length}else{h.graph2dAxis.offset.left=h.graph2dAxis.options.font.width*h.graph2dAxis.bottom.toString().length}},setBottomOffset:function(){h.graph2dAxis.offset.bottom=h.graph2dAxis.options.height-(h.graph2dAxis.nbStep*h.graph2dAxis.options.font.height);if(h.graph2dAxis.cuttingPos>0){h.graph2dAxis.offset.bottom-=(2*h.graph2dAxis.options.font.height)}},setMetric:function(){var n=undefined;var v=undefined;var p=undefined;var w=undefined;var r=0;if(h.graph2dAxis.options.topvalue){if(h.graph2dAxis.options.topvaluenegative){n=-(h.graph2dAxis.options.topvalue)}else{n=h.graph2dAxis.options.topvalue}}if(h.graph2dAxis.options.bottomvalue){if(h.graph2dAxis.options.bottomvaluenegative){v=-(h.graph2dAxis.options.bottomvalue)}else{v=h.graph2dAxis.options.bottomvalue}}b.each(h.graph2dAxis.series.series,function(){b.each(this.cell,function(){if(n==undefined){n=this.value}if(n<this.value){n=this.value}if(v==undefined){v=this.value}if(v>this.value){v=this.value}})});if(n>0){var o=Math.floor(n);n=(n-o>0?o+1:o)}else{n=Math.ceil(n)}v=Math.floor(v);if(n==v){if(n>0){v=0}else{if(n<0){n=0}else{v=-5;n=5}}}var s=h.graph2dAxis.utils.topRound(n-v);p=h.graph2dAxis.utils.topRound(s/h.graph2dAxis.nbStep);w=Math.round(h.graph2dAxis.nbStep*n/s);if(w>h.graph2dAxis.nbStep){w=h.graph2dAxis.nbStep}if(w<0){w=1}var q=h.graph2dAxis.utils.topRound(n/(w-1));var u=Math.abs(h.graph2dAxis.utils.topRound(v/(h.graph2dAxis.nbStep-w)));if(q>p&&(v>=0||(n>0&&0>v))){p=q}if(u>p&&(n<=0||(n>0&&0>v))){p=u}var t=h.graph2dAxis.utils.topRound(s/(h.graph2dAxis.nbStep-2));if(!h.graph2dAxis.options.nocutaxis){if(t<q&&v>0){r=(h.graph2dAxis.nbStep-1);h.graph2dAxis.nbStep=h.graph2dAxis.nbStep-2;p=t}if(t<u&&n<0){r=2;h.graph2dAxis.nbStep=h.graph2dAxis.nbStep-2;p=t}}if(h.graph2dAxis.options.steps){p=h.graph2dAxis.options.steps}if(r==0){n=h.graph2dAxis.utils.topRound((w-1)*p);v=Math.floor(n-((h.graph2dAxis.nbStep-1)*p))}else{n=n;v=Math.floor(n-((h.graph2dAxis.nbStep-1)*p))}h.graph2dAxis.top=n;h.graph2dAxis.bottom=v;h.graph2dAxis.zeroPos=w;h.graph2dAxis.cuttingPos=r;h.graph2dAxis.incrementation=p},init:function(o,n){h.graph2dAxis.series=o;h.graph2dAxis.options=n;h.graph2dAxis.setNbColumnHeading();if(h.graph2dAxis.drawDirection=="x"){h.graph2dAxis.setHeightXLabel();h.graph2dAxis.setMetric();h.graph2dAxis.cuttingOffset=0;if(h.graph2dAxis.cuttingPos==(h.graph2dAxis.nbStep-1)){h.graph2dAxis.cuttingOffset=h.graph2dAxis.options.font.height}}},generateGraph:function(n,o){h.graph2dAxis.paperContainer=n;h.graph2dAxis.paper=o;if(h.graph2dAxis.drawDirection=="x"){h.graph2dAxis.setLeftOffset();h.graph2dAxis.setBottomOffset();h.graph2dAxis.xAxis();h.graph2dAxis.xLabel();h.graph2dAxis.yAxisLabel();h.graph2dAxis.graph()}else{}},xAxis:function(){h.graph2dAxis.xAxisOffset=(h.graph2dAxis.options.font.height*(h.graph2dAxis.zeroPos-1)+h.graph2dAxis.offset.top+h.graph2dAxis.cuttingOffset);var r="M "+h.graph2dAxis.offset.left+" "+h.graph2dAxis.xAxisOffset+" ";var n;for(i=1;i<=(h.graph2dAxis.NbColumnHeading);i++){n=(i*((h.graph2dAxis.options.width-h.graph2dAxis.offset.left)/h.graph2dAxis.NbColumnHeading));if(h.graph2dAxis.options.axis.tick||(h.graph2dAxis.options.axis.top.tick!=null?h.graph2dAxis.options.axis.top.tick:false)||(h.graph2dAxis.options.axis.bottom.tick!=null?h.graph2dAxis.options.axis.bottom.tick:false)){var o=((i-1)*((h.graph2dAxis.options.width-h.graph2dAxis.offset.left)/h.graph2dAxis.NbColumnHeading));var q=((n-o)/2)+o;q+=h.graph2dAxis.offset.left;r+="L "+q+" "+h.graph2dAxis.xAxisOffset+" ";if(h.graph2dAxis.options.axis.top.tick!=null?h.graph2dAxis.options.axis.top.tick:h.graph2dAxis.options.axis.tick){r+="L "+q+" "+(h.graph2dAxis.xAxisOffset-(h.graph2dAxis.options.axis.top.lenght!=null?h.graph2dAxis.options.axis.top.lenght:h.graph2dAxis.options.axis.lenght))+" "}if(h.graph2dAxis.options.axis.bottom.tick!=null?h.graph2dAxis.options.axis.bottom.tick:h.graph2dAxis.options.axis.tick){r+="L "+q+" "+(h.graph2dAxis.xAxisOffset+(h.graph2dAxis.options.axis.bottom.lenght!=null?h.graph2dAxis.options.axis.bottom.lenght:h.graph2dAxis.options.axis.lenght))+" "}r+="L "+q+" "+h.graph2dAxis.xAxisOffset+" "}n+=h.graph2dAxis.offset.left;r+="L "+n+" "+h.graph2dAxis.xAxisOffset+" "}try{h.graph2dAxis.paper.path(r)}catch(p){console.log("Error xAxisPath: "+r)}},xLabel:function(){b.each(h.graph2dAxis.series.heading,function(){var B=this.colPos;var q=(this.colPos+this.width);if(B>=h.graph2dAxis.series.nbRowLevel){B-=h.graph2dAxis.series.nbRowLevel;q=q-h.graph2dAxis.series.nbRowLevel;var w=Math.floor((h.graph2dAxis.options.width-h.graph2dAxis.offset.left)/(h.graph2dAxis.NbColumnHeading)*B);var x=Math.floor((h.graph2dAxis.options.width-h.graph2dAxis.offset.left)/(h.graph2dAxis.NbColumnHeading)*q);var t=w;t=Math.floor((x-w)/2)+w;var A="middle";t+=h.graph2dAxis.offset.left;var u=(h.graph2dAxis.series.nbColLevel-this.height-this.level);var n=(h.graph2dAxis.options.height-h.graph2dAxis.layout.headingMinSize)+(h.graph2dAxis.options.font.height*u);var o=n+(this.height*h.graph2dAxis.options.font.height);var r=n+((o-n)/2);var y=w+h.graph2dAxis.offset.left;var z=((h.graph2dAxis.options.width-h.graph2dAxis.offset.left)/(h.graph2dAxis.NbColumnHeading))*(this.width);var v=o-n;var p="50-#F4F4F4-#FFF";var E="90-#FFF-#F4F4F4";if(this.param.fill){p=d(this.param.fill)}if(this.param.fillover){E=d(this.param.fillover)}var D=h.graph2dAxis.paper.rect(y,n,z,v);D.attr("fill",p);D.attr("stroke-width","0");var C=this.header;if((C.length*h.graph2dAxis.options.font.width)>z){C=C.substring(0,Math.floor(z/h.graph2dAxis.options.font.width))}var s=h.graph2dAxis.paper.text(t,r,C);s.attr("text-anchor",A);s.attr("font-size",h.graph2dAxis.options.font.size+"px");s.attr("title",this.header);D.mouseover(function(){D.attr("fill",E)}).mouseout(function(){D.attr("fill",p)});s.mouseover(function(){D.attr("fill",E)}).mouseout(function(){D.attr("fill",p)})}})},yAxisLabel:function(){var o="M "+h.graph2dAxis.offset.left+" "+h.graph2dAxis.offset.top+" ";h.graph2dAxis.cuttingPosPaper=0;if(h.graph2dAxis.top<0){var p=h.graph2dAxis.paper.text(h.graph2dAxis.offset.left-4,h.graph2dAxis.offset.top,0);p.attr("text-anchor","end");p.attr("font-size",h.graph2dAxis.options.font.size+"px");o+="L "+h.graph2dAxis.offset.left+" "+h.graph2dAxis.offset.top+" ";o+="L "+(h.graph2dAxis.offset.left+4)+" "+h.graph2dAxis.offset.top+" ";o+="L "+(h.graph2dAxis.offset.left-2)+" "+h.graph2dAxis.offset.top+" ";o+="L "+h.graph2dAxis.offset.left+" "+h.graph2dAxis.offset.top+" ";o+="L "+h.graph2dAxis.offset.left+" "+(h.graph2dAxis.offset.top+(h.graph2dAxis.options.font.height)-(h.graph2dAxis.options.font.height/4))+" ";o+="L "+(h.graph2dAxis.offset.left+10)+" "+(h.graph2dAxis.offset.top+(h.graph2dAxis.options.font.height))+" ";o+="L "+(h.graph2dAxis.offset.left-10)+" "+(h.graph2dAxis.offset.top+(h.graph2dAxis.options.font.height)-(h.graph2dAxis.options.font.height/2))+" ";h.graph2dAxis.paper.path(o);o="M "+h.graph2dAxis.offset.left+" "+(h.graph2dAxis.offset.top+h.graph2dAxis.options.font.height+(h.graph2dAxis.options.font.height/4))+" ";o+="L "+(h.graph2dAxis.offset.left+10)+" "+(h.graph2dAxis.offset.top+h.graph2dAxis.options.font.height+(h.graph2dAxis.options.font.height/2))+" ";o+="L "+(h.graph2dAxis.offset.left-10)+" "+(h.graph2dAxis.offset.top+h.graph2dAxis.options.font.height)+" ";o+="L "+(h.graph2dAxis.offset.left)+" "+(h.graph2dAxis.offset.top+h.graph2dAxis.options.font.height+(h.graph2dAxis.options.font.height/4))+" ";h.graph2dAxis.cuttingPosPaper=(h.graph2dAxis.offset.top+h.graph2dAxis.options.font.height);h.graph2dAxis.offset.top+=(2*h.graph2dAxis.options.font.height)}for(i=0;i<h.graph2dAxis.nbStep;i++){if(h.graph2dAxis.cuttingPos==0||(h.graph2dAxis.cuttingPos>i&&h.graph2dAxis.bottom>0)||h.graph2dAxis.top<0){var p=h.graph2dAxis.paper.text(h.graph2dAxis.offset.left-4,h.graph2dAxis.offset.top+(i*h.graph2dAxis.options.font.height),(h.graph2dAxis.top-(i*h.graph2dAxis.incrementation)));p.attr("text-anchor","end");p.attr("font-size",h.graph2dAxis.options.font.size+"px");o+="L "+h.graph2dAxis.offset.left+" "+(h.graph2dAxis.offset.top+(i*h.graph2dAxis.options.font.height))+" ";o+="L "+(h.graph2dAxis.offset.left+4)+" "+(h.graph2dAxis.offset.top+(i*h.graph2dAxis.options.font.height))+" ";o+="L "+(h.graph2dAxis.offset.left-2)+" "+(h.graph2dAxis.offset.top+(i*h.graph2dAxis.options.font.height))+" ";o+="L "+h.graph2dAxis.offset.left+" "+(h.graph2dAxis.offset.top+(i*h.graph2dAxis.options.font.height))+" "}}if(h.graph2dAxis.cuttingPos>h.graph2dAxis.nbStep&&h.graph2dAxis.bottom>0){o+="L "+h.graph2dAxis.offset.left+" "+(h.graph2dAxis.offset.top+(i*h.graph2dAxis.options.font.height)-(h.graph2dAxis.options.font.height/4))+" ";o+="L "+(h.graph2dAxis.offset.left-10)+" "+(h.graph2dAxis.offset.top+(i*h.graph2dAxis.options.font.height))+" ";o+="L "+(h.graph2dAxis.offset.left+10)+" "+(h.graph2dAxis.offset.top+(i*h.graph2dAxis.options.font.height)-(h.graph2dAxis.options.font.height/2))+" ";h.graph2dAxis.paper.path(o);o="M "+h.graph2dAxis.offset.left+" "+(h.graph2dAxis.offset.top+(i*h.graph2dAxis.options.font.height)+(h.graph2dAxis.options.font.height/4))+" ";o+="L "+(h.graph2dAxis.offset.left-10)+" "+(h.graph2dAxis.offset.top+(i*h.graph2dAxis.options.font.height)+(h.graph2dAxis.options.font.height/2))+" ";o+="L "+(h.graph2dAxis.offset.left+10)+" "+(h.graph2dAxis.offset.top+(i*h.graph2dAxis.options.font.height))+" ";o+="L "+(h.graph2dAxis.offset.left)+" "+(h.graph2dAxis.offset.top+(i*h.graph2dAxis.options.font.height)+(h.graph2dAxis.options.font.height/4))+" ";var p=h.graph2dAxis.paper.text(h.graph2dAxis.offset.left-4,h.graph2dAxis.offset.top+((i+1)*h.graph2dAxis.options.font.height),0);p.attr("text-anchor","end");p.attr("font-size",h.graph2dAxis.options.font.size+"px");o+="L "+h.graph2dAxis.offset.left+" "+(h.graph2dAxis.offset.top+((i+1)*h.graph2dAxis.options.font.height))+" ";o+="L "+(h.graph2dAxis.offset.left+4)+" "+(h.graph2dAxis.offset.top+((i+1)*h.graph2dAxis.options.font.height))+" ";o+="L "+(h.graph2dAxis.offset.left-2)+" "+(h.graph2dAxis.offset.top+((i+1)*h.graph2dAxis.options.font.height))+" ";o+="L "+h.graph2dAxis.offset.left+" "+(h.graph2dAxis.offset.top+((i+1)*h.graph2dAxis.options.font.height))+" ";h.graph2dAxis.cuttingPosPaper=(h.graph2dAxis.offset.top+(i*h.graph2dAxis.options.font.height));h.graph2dAxis.options.height-=(2*h.graph2dAxis.options.font.height)}var n=h.graph2dAxis.paper.path(o)},graph:function(){var r=0;var o=undefined;var p="line";b.each(h.graph2dAxis.series.series,function(){p=this.type;if(p=="bar"){r++;o="bar"}if(p=="stacked"&&(o!="stacked"||o==undefined)){r++;o="stacked"}});o=undefined;var s=-1;var n=b("<ul>").appendTo(b(h.graph2dAxis.paperContainer));h.graph2dAxis.legendContainer=n;var q=0;b.each(h.graph2dAxis.series.series,function(){var B=this;var O=b("<li></li>").appendTo(b(n));var C=b('<span style="margin-right:7px;"></span>').appendTo(b(O));var A=Raphael(b(C).get(0),h.graph2dAxis.options.font.size,h.graph2dAxis.options.font.size);var x=A.rect(2,2,h.graph2dAxis.options.font.size-(2*2)+(2/2),h.graph2dAxis.options.font.size-(2*2)+(2/2));p=this.type;var N=undefined;var y="";if(h.graph2dAxis.options.colors[q]){N=h.graph2dAxis.options.colors[q]}else{N=h.graph2dAxis.options.colors[0]}if(B.param.color){N=d(B.param.color)}if(B.param.dasharray){y=B.param.dasharray.toLowerCase();y=y.replace("space"," ").replace("dash","-").replace("dot",".").replace("none","")}var u=0;var E=undefined;var D=undefined;if(D==undefined){D=B.header.rawValue}b.each(this.cell,function(){var R=(u*((h.graph2dAxis.options.width-h.graph2dAxis.offset.left)/h.graph2dAxis.NbColumnHeading));var Q=((u+1)*((h.graph2dAxis.options.width-h.graph2dAxis.offset.left)/h.graph2dAxis.NbColumnHeading));var S=((Q-R)/2)+R+h.graph2dAxis.offset.left;if(!this.isHeader){this.graphMinPos=R;this.graphMaxPos=Q;this.graphCenterPos=S;this.graphValue=(((h.graph2dAxis.top-this.value)*(h.graph2dAxis.options.font.height*(h.graph2dAxis.nbStep-1))/(h.graph2dAxis.top-h.graph2dAxis.bottom))+h.graph2dAxis.offset.top);if(E==undefined){E=Q-R}u++}});b(O).append(D);if(p=="line"||p=="area"){var G=undefined;var P=undefined;var H=undefined;b.each(this.cell,function(){if(!this.isHeader){if(G==undefined){G="M "+this.graphCenterPos+" "}else{G+="L "+this.graphCenterPos+" "}G+=this.graphValue+" ";if(P==undefined){P=this.graphCenterPos}H=this.graphCenterPos}});if(p=="area"){if(h.graph2dAxis.cuttingPosPaper==0){G+="L "+H+" "+h.graph2dAxis.xAxisOffset+" ";G+="L "+P+" "+h.graph2dAxis.xAxisOffset+" ";G+="z"}else{if(h.graph2dAxis.top<0){G+=" L "+H+" "+(h.graph2dAxis.cuttingPosPaper+(h.graph2dAxis.options.font.height/2));G+=" L "+P+" "+h.graph2dAxis.cuttingPosPaper;G+=" z";var L=h.graph2dAxis.paper.path(G);L.attr("stroke",N);L.attr("stroke-dasharray",y);if(p=="area"){L.attr("fill",N);L.attr("fill-opacity",(30/100))}G="M "+P+" "+(h.graph2dAxis.cuttingPosPaper-(h.graph2dAxis.options.font.height/2));G+=" L "+H+" "+h.graph2dAxis.cuttingPosPaper;G+=" L "+H+" "+h.graph2dAxis.xAxisOffset;G+=" L "+P+" "+h.graph2dAxis.xAxisOffset;G+=" z"}else{G+=" L "+H+" "+(h.graph2dAxis.cuttingPosPaper-(h.graph2dAxis.options.font.height/2));G+=" L "+P+" "+h.graph2dAxis.cuttingPosPaper;G+=" z";var L=h.graph2dAxis.paper.path(G);L.attr("stroke",N);L.attr("stroke-dasharray",y);if(p=="area"){L.attr("fill",N);L.attr("fill-opacity",(30/100))}G="M "+P+" "+(h.graph2dAxis.cuttingPosPaper+(h.graph2dAxis.options.font.height/2));G+=" L "+H+" "+h.graph2dAxis.cuttingPosPaper;G+=" L "+H+" "+h.graph2dAxis.xAxisOffset;G+=" L "+P+" "+h.graph2dAxis.xAxisOffset;G+=" z"}}}var L=h.graph2dAxis.paper.path(G);L.attr("stroke",N);x.attr("stroke",N);L.attr("stroke-dasharray",y);x.attr("stroke-dasharray",y);if(p=="area"){L.attr("fill",N);x.attr("fill",N);L.attr("fill-opacity",(30/100));x.attr("fill-opacity",(30/100))}else{x.attr("fill",N)}}if(p=="bar"||p=="stacked"){if(o!="stacked"&&p!="stacked"||o!=p){s++}o=p;var M=50;var I=50;var F=(r*100)+M+I;var K=(M*E/F);var J=(I*E/F);var w=E-K-J;var z=w/r;var t=z*s;var v=t+z;b.each(this.cell,function(){if(!this.isHeader){var S=this.graphMinPos+t+K+h.graph2dAxis.offset.left;var R=undefined;var Q=undefined;var T=z;if(h.graph2dAxis.xAxisOffset>=this.graphValue){R=this.graphValue;Q=h.graph2dAxis.xAxisOffset-this.graphValue}else{R=h.graph2dAxis.xAxisOffset;Q=this.graphValue-h.graph2dAxis.xAxisOffset}var V="";if(h.graph2dAxis.cuttingPosPaper==0){V="M "+S+" "+R;V+=" L "+(S+T)+" "+R;V+=" L "+(S+T)+" "+(R+Q);V+=" L "+S+" "+(R+Q);V+=" z"}else{if(h.graph2dAxis.top<0){V="M "+S+" "+R;V+=" L "+(S+T)+" "+R;V+=" L "+(S+T)+" "+h.graph2dAxis.cuttingPosPaper;V+=" L "+S+" "+(h.graph2dAxis.cuttingPosPaper-(h.graph2dAxis.options.font.height/2));V+=" z";var U=h.graph2dAxis.paper.path(V);U.attr("fill",N);if(B.param.fillopacity){U.attr("fill-opacity",(B.param.fillopacity/100))}V="M "+S+" "+h.graph2dAxis.cuttingPosPaper;V+=" L "+(S+T)+" "+(h.graph2dAxis.cuttingPosPaper+(h.graph2dAxis.options.font.height/2));V+=" L "+(S+T)+" "+(R+Q);V+=" L "+S+" "+(R+Q);V+=" z"}else{V="M "+S+" "+R;V+=" L "+(S+T)+" "+R;V+=" L "+(S+T)+" "+(h.graph2dAxis.cuttingPosPaper-(h.graph2dAxis.options.font.height/2));V+=" L "+S+" "+h.graph2dAxis.cuttingPosPaper;V+=" z";var U=h.graph2dAxis.paper.path(V);U.attr("fill",N);if(B.param.fillopacity){U.attr("fill-opacity",(B.param.fillopacity/100))}V="M "+S+" "+(h.graph2dAxis.cuttingPosPaper+(h.graph2dAxis.options.font.height/2));V+=" L "+(S+T)+" "+h.graph2dAxis.cuttingPosPaper;V+=" L "+(S+T)+" "+(R+Q);V+=" L "+S+" "+(R+Q);V+=" z"}}var U=h.graph2dAxis.paper.path(V);U.attr("fill",N);x.attr("fill",N);if(B.param.fillopacity){U.attr("fill-opacity",(B.param.fillopacity/100));x.attr("fill-opacity",(B.param.fillopacity/100))}}})}q++})}};var c={sourceTblSelf:undefined,param:{},parse:function(){c.sourceTblSelf=m;if((c.param.parseDirection?c.param.parseDirection:e.parseDirection)=="y"){m=c.swapTable(c.sourceTblSelf)}c.setSeriesHeadingLenght();var o=[];b("thead",m).each(function(){var q=[];var p=[];c.rowPos=0;b("tr",this).each(function(){var r=0;var t=0;b.each(p,function(){if(this.colpos==t&&this.rowspan>0){var u=((b(this.ele).attr("colspan")!=undefined?b(this.ele).attr("colspan"):1)*1);t+=u;this.rowspan--}});var s="";b("td, th",this).each(function(){c.cellID++;var y=false;var D=((b(this).attr("colspan")!=undefined?b(this).attr("colspan"):1)*1);var z=((b(this).attr("rowspan")!=undefined?b(this).attr("rowspan"):1)*1);if(z>1){var B=z-1;p.push({ele:b(this),rowspan:B,colpos:t})}CurrentGroupingID=0;if(c.rowPos>0){var x="";b.each(q,function(){if(t>=this.colPos&&t<(this.colPos+this.width)&&this.isGroup&&this.level<c.rowPos){CurrentGroupingID=this.id}})}var C=false;if(this.nodeName.toLowerCase()=="th"&&D>1){C=true}if(o[t]!=undefined){b(this).attr("headers",o[t])}var v="";if(this.nodeName.toLowerCase()=="th"&&b(this).text().replace(/ /g,"")!=""){v=b(this).attr("id");if(v==undefined||v==""){v="graphcellid"+g+"row"+c.rowPos+"col"+t;b(this).attr("id",v)}for(i=0;i<D;i++){var E=i+t;if(o[E]==undefined){o[E]=v}else{o[E]=o[E]+" "+v}}}var u=b(c.sourceTblSelf).attr("id");var A={id:c.cellID,uniqueID:v,level:c.rowPos,width:D,height:z,header:b(this).text(),groupId:CurrentGroupingID,isGroup:C,colPos:t,param:c.classToJson(this)};q.push(A);if(c.tBodySeries.nbColLevel<=c.rowPos||c.tBodySeries.nbColLevel==undefined){c.tBodySeries.nbColLevel=(c.rowPos+1)}t+=D;b.each(p,function(){if(this.colpos==t&&this.rowspan>0){var F=((b(this.ele).attr("colspan")!=undefined?b(this.ele).attr("colspan"):1)*1);t+=F;this.rowspan--}})});c.rowPos++});c.tBodySeries.ColHeading=q});var n=[];b("tbody",m).each(function(){var t;var s;var r;var q=[];var p={headerList:[],series:[],param:c.classToJson(this)};b("tr",this).each(function(){var C=0;var A=0;var w=0;var u=b(this).children();var D=[];var B=[];b.each(q,function(){if(this.colpos==A&&this.rowspan>0){var E=((b(this.ele.obj).attr("colspan")!=undefined?b(this.ele.obj).attr("colspan"):1)*1);for(i=1;i<=E;i++){this.ele.colPos=i+A;if(this.ele.isHeader){B.push(jQuery.extend(true,{},this.ele))}else{D.push(jQuery.extend(true,{},this.ele))}}A+=E;if(b(this.ele.obj).get(0).nodeName.toLowerCase()=="th"&&c.seriesHeadingLenght>A){C++;if(this.rowspan>=1){w=this.ele.id}}this.rowspan--}});var y="";var x;var z=false;var v="";b("th, td",this).each(function(){c.cellID++;var E=false;var M=c.getCellValue(b(this).text());var F={id:c.cellID,isHeader:false,rowPos:c.rowPos,rawValue:b(this).text(),value:M.cellValue,unit:M.cellUnit,obj:b(this),param:c.classToJson(this)};var N=((b(this).attr("colspan")!=undefined?b(this).attr("colspan"):1)*1);var G=((b(this).attr("rowspan")!=undefined?b(this).attr("rowspan"):1)*1);var I="";for(i=A;i<(A+N);i++){if(o[i]!=undefined){if(I==""){I=o[i]}else{var K=c.removeDuplicateElement(I.split(" ").concat(o[i].split(" ")));I=K.join(" ")}}}var J="";if(n[c.rowPos]!=undefined){J=n[c.rowPos]}b(this).attr("headers",I+(I!=""&&J!=""?" ":"")+J);if(this.nodeName.toLowerCase()=="th"){F.isHeader=true;cellId=b(this).attr("id");if(cellId==undefined||cellId==""){cellId="graphcellid"+g+"row"+c.rowPos+"col"+A;b(this).attr("id",cellId)}for(i=0;i<G;i++){var O=i+c.rowPos;if(n[O]==undefined){n[O]=cellId}else{n[O]=n[O]+" "+cellId}}}if(G>1){var L=G-1;q.push({ele:F,rowspan:L,colpos:A,groupId:w});if(F.isHeader&&c.seriesHeadingLenght>A){C++;F.isHeader=true;var H={id:c.cellID,level:C,width:G,height:N,header:b(this).text(),groupId:w,isGroup:true,rowPos:c.rowPos,param:c.classToJson(this)};p.headerList.push(H);w=c.cellID}}for(i=1;i<=N;i++){F.colPos=i+A;if(F.isHeader){B.push(jQuery.extend(true,{},F))}else{D.push(jQuery.extend(true,{},F))}}A+=N;if(c.seriesHeadingLenght==A){if(!F.isHeader){z=true;v="Serie heading not good, current cell value:"+b(this).text()}y=b(this).text();x=b(this);var H={id:c.cellID,level:C,width:G,height:N,header:b(this).text(),groupId:w,isGroup:false,rowPos:c.rowPos,param:c.classToJson(this)};p.headerList.push(H)}b.each(q,function(){if(this.colpos==A&&this.rowspan>0){var P=((b(this.ele.obj).attr("colspan")!=undefined?b(this.ele.obj).attr("colspan"):1)*1);for(i=1;i<=P;i++){this.ele.colPos=i+A;if(this.ele.isHeader){B.push(jQuery.extend(true,{},this.ele))}else{D.push(jQuery.extend(true,{},this.ele))}}A+=P;var R=(b(this.ele.obj).attr("headers")!=undefined?b(this.ele.obj).attr("headers"):"");var Q=c.removeDuplicateElement(R.split(" ").concat(n[c.rowPos].split(" ")));b(this.ele.obj).attr("headers",Q.join(" "));this.rowspan--}})});serie={cell:D,cellHeading:B,header:y,headerParam:c.classToJson(x),level:C,GroupId:w,rowPos:c.rowPos,isRejected:z,rejectedRaison:v};if((c.tBodySeries.nbRowLevel<=C||c.tBodySeries.nbRowLevel==undefined)&&!z){c.tBodySeries.nbRowLevel=(C+1)}p.series.push(serie);c.rowPos++});c.tBodySeries.series.push(p)});c.compute()},seriesHeadingLenght:0,setSeriesHeadingLenght:function(){b("tbody:first tr:first th",m).each(function(){var n=((b(this).attr("colspan")!=undefined?b(this).attr("colspan"):1)*1);c.seriesHeadingLenght+=n})},rowPos:0,cellID:0,removeDuplicateElement:function(q){var n=new Array();label:for(var p=0;p<q.length;p++){for(var o=0;o<n.length;o++){if(n[o]==q[p]){continue label}}n[n.length]=q[p]}return n},swapTable:function(){var o=[];var q=0;var p=0;var B="Table caption tag is missing";B=b("caption",m).text();var u=10;var A=0;b("tr ",m).each(function(){u++;if(A<1){b("td,th",b(this)).each(function(){if(b(this).attr("colspan")!=undefined){}else{b(this).attr("colspan",1)}u+=Number(b(this).attr("colspan"))})}A++});var z=[];for(var A=0;A<u;A++){z[A]=[];for(var y=0;y<u;y++){z[A][y]=0}}b("tr ",m).each(function(){p=0;var t=1;var s=1;b("td,th",b(this)).each(function(){if(b(this).attr("colspan")!=undefined){}else{b(this).attr("colspan",1)}if(b(this).attr("rowspan")!=undefined){}else{b(this).attr("rowspan",1)}t=Number(b(this).attr("colspan"));s=Number(b(this).attr("rowspan"));while(z[q][p]==3){p++}if(s>1&&t>1){var D=q;var F=p;var G=q+s-1;var C=p+t-1;for(F=p;F<=C;F++){for(D=q;D<=G;D++){z[D][F]=3}}}else{if(s>1){var D=q;var G=q+s-1;for(D=q;D<=G;D++){z[D][p]=3}}}var E=b(this).clone();E.attr("colspan",s);E.attr("rowspan",t);(o[p]=o[p]||[])[q]=E;p=p+t});q++});var n=b("<table>");b.each(o,function(C){var t=b("<tr>");n.append(t);b.each(o[C],function(s,D){t.append(D)})});var w=n.html();var v='<table id="swappedGraph"><caption>'+B+" (Horizontal to Virtical)</caption><thead>";w=w.replace(/<tbody>/gi,v);w=w.replace(/<\/tbody>/gi,"</tbody></table>");w=w.replace(/\n/g,"");w=w.replace(/<tr/gi,"\n<tr");var r=w.split("\n");for(q=0;q<r.length;q++){var x=r[q];if(x.match(/<td/i)!=null){r[q]="</thead><tbody>"+x;break}}w=r.join("\n");b(w).insertAfter(m).hide();return b(w)},compute:function(){b.each(c.tBodySeries.series,function(){var o=undefined;var n=undefined;var p=undefined;b.each(this.series,function(){if(!this.isRejected){var s=undefined;var r=undefined;var q=0;b.each(this.cell,function(){if(!this.isHeader){if(this.value>s||s==undefined){s=this.value}if(this.value<r||r==undefined){r=this.value}q++}});this.maxValue=s;this.minValue=r;this.length=q;if(p==undefined){p=q}if(q!=p){this.isRejected=true;this.rejectedRaison="The data length need to be equal for all the series"}if((s>o||o==undefined)&&!this.isRejected){o=s}if((r<n||n==undefined)&&!this.isRejected){n=r}}});if(o>0){o=o}else{o=o}if(n>0){n=n}else{n=n}this.maxValue=o;this.minValue=n;this.dataLength=p})},getCellValue:function(o){var o=o.replace(/\s\s+/g," ");var o=o.replace(/^\s+|\s+$/g,"");var n={cellUnit:o.match(/[^\+\-\.\, 0-9]+[^\-\+0-9]*/),cellValue:parseFloat(o.match(/[\+\-0-9]+[0-9,\. ]*/))};return n},classToJson:function(o,n){var p="";if(typeof(o)=="string"){p=o}else{p=(b(o).attr("class")!=undefined?b(o).attr("class"):"")}return c.setClassOptions(jQuery.extend(true,e.optionsClass,e.axis2dgraph),p,n)},setClassOptions:function(o,u,p){if(typeof(o)!="object"){console.log("Empty source");return{}}o=jQuery.extend(true,{},o);if(typeof(u)!="string"||u.lenght==0){console.log("no string class");return o}if(typeof(p)!="string"||p.lenght==0){if(o["default-namespace"]&&typeof(o["default-namespace"])=="string"){p=o["default-namespace"]}else{console.log("no namespace");return o}}var t="";if(o["default-namespace-separator"]&&typeof(o["default-namespace-separator"])=="string"){t=o["default-namespace-separator"]}else{t="-"}var s="";if(o["default-separator"]&&typeof(o["default-separator"])=="string"){s=o["default-separator"]}else{s=" "}var q=false;if(o["default-autocreate"]){q=true}var r=p.split(t);var n=u.split(s);b.each(n,function(){if(p==(this.length>p.length+t.length?this.slice(0,p.length):"")){var E=this.split(t).slice(r.length);var z=o;var A=r[r.length-1];for(i=0;i<E.length;i++){var B=(i+2==E.length?true:false);var w=(i+1==E.length?true:false);if(w&&E.length==1&&o["default-option"]){A=o["default-option"]}else{if(!w){A=E[i]}}if(z[A+"-typeof"]){var v=[];for(j=(i+1);j<E.length;j++){v.push(E[j])}E[i]=v.join(t);B=false;w=true;switch(z[A+"-typeof"]){case"boolean":if(E[i]=="true"||E[i]=="1"||E[i]=="vrai"||E[i]=="yes"||E[i]=="oui"){E[i]=true}else{if(E[i]=="false"||E[i]=="0"||E[i]=="faux"||E[i]=="no"||E[i]=="non"){E[i]=false}else{E[i]=undefined}}break;case"number":if(!isNaN(parseInt(E[i]))){E[i]=parseInt(E[i])}else{E[i]=undefined}break;case"string":break;case"undefined":case"function":case"locked":E[i]=undefined;break;default:break}}var y=false;if(z[A+"-overwrite-array-mode"]){y=true}var C=false;if(z[A+"-autocreate"]){C=true}if(B&&E[i]!==undefined){A=E[i]}else{if(w&&E[i]!==undefined){if(z[A]&&y){if(b.isArray(z[A])){z[A].push(E[i])}else{var x=z[A];z[A]=[];z[A].push(x);z[A].push(E[i])}}else{if(z[A]||q||C||z[A]==0||z[A]==false){var D="";if(typeof(E[i])=="boolean"||typeof(E[i])=="number"){D='{"'+A+'": '+E[i]+"}"}else{D='{"'+A+'": "'+E[i]+'"}'}z=jQuery.extend(true,z,jQuery.parseJSON(D))}}i=E.length}else{if(E[i]!==undefined&&z[E[i]]){z=z[E[i]];A=E[i]}else{if((q||C)&&E[i]!==undefined){var D='{"'+E[i]+'": {}}';z=jQuery.extend(true,z,jQuery.parseJSON(D));z=z[E[i]]}else{i=E.length}}}}}}});return o},tBodySeries:{series:[],nbRowLevel:undefined,nbColLevel:undefined}};e=c.setClassOptions(e,(b(m).attr("class")!=undefined?b(m).attr("class"):""));c.param=e;c.parse();e.width=parseFloat((c.param.width?c.param.width-e.widthPadding:e.width-e.widthPadding));e.width=parseFloat(e.width>(e.maxwidth-e.widthPadding)?e.maxwidth-e.widthPadding:e.width);e.height=parseFloat((c.param.height?c.param.height:e.height));var l=c.tBodySeries.nbRowLevel;var f="";if(c.param.graph){f=c.param.graph}else{if(c.param.type){f=c.param.type}else{f=e.type}}b.each(c.tBodySeries.series,function(){var v=0;var K=[];var t=0;var G=[];var q="line";if(c.param.type){q=c.param.type}if(this.param.graph){q=this.param.graph}var s=-1;var B=[];var y=q;var u="";var o={};var E={};var A=[];var r=true;b.each(this.series,function(){if(this.cellHeading.length==0){this.isRejected=true}if(!this.isRejected){r=false;var P=false;var L={};if(this.cellHeading.length>l){L=this.cellHeading[l];if(s==L.id){B.push(jQuery.extend(true,{},L))}else{var O=[];b.each(B,function(){for(i=0;i<this.cell.length;i++){if(O.length<=i){O.push(this.cell[i])}else{O[i]+=this.cell[i]}}});for(i=0;i<O.length;i++){O[i]=O[i]/B.length}if(u=="2daxis"){var M={cell:O,type:y,param:o,header:E};K.push(M)}else{if(u=="cicle"){var M={cell:O,type:y,param:o,header:E};G.push(M)}}B=[];B.push(jQuery.extend(true,{},L));o=L.param}}else{L=this.cellHeading[this.cellHeading.length-1];if(u=="2daxis"){var M={cell:A,type:y,param:o,header:E};K.push(M)}else{if(u=="cicle"){var M={cell:A,type:y,param:o,header:E};G.push(M)}}A=this.cell;o=L.param}E=L;var N="";if(L.param.type){N=L.param.type}else{N=q}if(N=="bar"||N=="stacked"||N=="line"||N=="area"){v++;u="2daxis";y=N}else{if(N=="pie"){t++;u="cicle";y=N}else{}}s=L.id}});var x=[];b.each(B,function(){for(i=0;i<this.cell.length;i++){if(x.length<=i){x.push(this.cell[i])}else{x[i]+=this.cell[i]}}});for(i=0;i<x.length;i++){x[i]=x[i]/B.length}if(x.length!=0){A=x}if(u=="2daxis"){var C={cell:A,type:y,param:o,header:E};K.push(C)}else{if(u=="cicle"){var C={cell:A,type:y,param:o,header:E};G.push(C)}}var p={heading:c.tBodySeries.ColHeading,nbRowLevel:c.tBodySeries.nbRowLevel,nbColLevel:c.tBodySeries.nbColLevel,series:K};var H={heading:c.tBodySeries.ColHeading,nbRowLevel:c.tBodySeries.nbRowLevel,nbColLevel:c.tBodySeries.nbColLevel,series:G};if(p.series.length>0){h.graph2dAxis.init(p,e)}if(H.series.length>0){h.circleGraph.init(H,e)}var w=b("<figure />").insertAfter(c.sourceTblSelf);b(w).width(e.width+e.widthPadding);b(w).addClass(e["default-namespace"]);if(c.param.graphclass){if(b.isArray(c.param.graphclass)){for(i=0;i<c.param.graphclass.length;i++){b(w).addClass(c.param.graphclass[i])}}else{b(w).addClass(c.param.graphclass)}}var z;var I=b("caption",c.sourceTblSelf).html();if(H.series.length==1&&H.series[0].header.rawValue==I){z=[];var D=[];D.push(w);var n=Raphael(b(w).get(0),h.circleGraph.width,h.circleGraph.height);z.push(n);h.circleGraph.generateGraph(D,z)}else{if(H.series.length>0){z=[];var D=[];b.each(H.series,function(){var L=b("<figcaption />");b(L).append(this.header.rawValue);var N=b("<figure />");b(w).append(N);D.push(N);var M=Raphael(b(N).get(0),h.circleGraph.width,h.circleGraph.height);b(L).prependTo(b(N));z.push(M)});h.circleGraph.generateGraph(D,z)}}if(p.series.length>0){z=Raphael(b(w).get(0),e.width,e.height);h.graph2dAxis.generateGraph(w,z)}if(!r){var F=b("<figcaption />");b(F).append(I);if(c.param.endcaption){b(w).append(F)}else{b(w).prepend(F)}var J=function(){var L=b(c.sourceTblSelf).attr("id");if(L==undefined||L==""){L="graphsource"+new Date().getTime();b(c.sourceTblSelf).attr("id",L)}b(w).attr("aria-describedby",L)};J()}else{b(w).remove()}});if(c.param.hide){c.sourceTblSelf.hide()}}};window.pe=a;return a}(jQuery));(function(b){var a=window.pe||{fn:{}};a.fn.css3ie={type:"plugin",depends:(pe.ie>0&&pe.ie<9?["pie","resize"]:[]),_exec:function(l){if(pe.mobile||!(pe.ie>0&&pe.ie<9)){return}var n=b(".rounded, .pie-enhance"),g=false,m=b("#wb-core"),d=m.children("#wb-core-in"),k=m.css("margin-bottom"),h,c,f,e;f=function(){n.each(function(){PIE.attach(this)});return true};e=function(){n.each(function(){PIE.detach(this)});return false};if(window.PIE){n.filter(function(){return b(this).css("position")==="static"}).css("position","relative");if(pe.ie===7){h=document.body;c=h.getBoundingClientRect();if((c.left-c.right)/h.offsetWidth===-1){g=f()}else{m.css("margin-bottom",(d.offset().top+d.height())-(m.offset().top+m.height()))}}else{if(pe.ie===8){g=f()}else{g=f()}}pe.resize(function(){if(pe.ie===7){var o=document.body,p=o.getBoundingClientRect();if((p.left-p.right)/o.offsetWidth!==-1){g=e(n);m.css("margin-bottom",(d.offset().top+d.height())-(m.offset().top+m.height()))}else{if(!g){f()}m.css("margin-bottom",k)}}})}return l}};window.pe=a;return a}(jQuery));(function(b){var a=window.pe||{fn:{}};a.fn.deselectradio={type:"plugin",depends:[],_exec:function(d){var c=b("input:radio").attr("role","radio").attr("aria-checked","false");c.filter(":checked").attr("aria-checked","true");c.closest("fieldset").attr("role","radiogroup");c.on("click vclick",function(){var e=b(this);if(e.attr("aria-checked")==="true"){e.prop("checked",false).attr("aria-checked","false")}else{e.closest("fieldset").find("input:radio").prop("checked",false).attr("aria-checked","false");e.prop("checked",true).attr("aria-checked","true")}});return d}};window.pe=a;return a}(jQuery));(function(b){var a=window.pe||{fn:{}};a.fn.equalize={type:"plugin",depends:(pe.mobile?[]:["equalheights","resize"]),_exec:function(c){if(pe.mobile){return}b(".equalize").children().css("min-height","").parent().equalHeights(true);pe.resize(function(){b(".equalize").children().css("min-height","").parent().equalHeights(true)});return c}};window.pe=a;return a}(jQuery));(function(b){var a=window.pe||{fn:{}};a.fn.feedback={type:"plugin",depends:[],_exec:function(k){var d=k.find("#feedback"),h=k.find("#web"),g=h.find("#access"),c=h.find("#mobile"),l=h.find("#computer"),n=k.find("#contact-coord"),o=n.find("#contact1"),m=n.find("#contact2"),f=n.find("#info"),e=document.referrer,p;d.attr("aria-controls","web").on("keyup click load",function(q){p=(q.type==="load");if(!p&&b(this).val()==="web"){h.attr("aria-hidden","false").show("slow")}else{h.attr("aria-hidden","true").hide((p?"":"slow"))}});d.find('option[value="'+pe.url(document.location).params.feedback+'"]').attr("selected","selected");d.trigger("load");g.attr("aria-controls","mobile computer").on("keyup click load",function(q){p=(q.type==="load");if(!p&&g.val()==="mobile"){c.attr("aria-hidden","false").show("slow");l.attr("aria-hidden","true").hide("slow")}else{l.attr("aria-hidden","false").show((p?"":"slow"));c.attr("aria-hidden","true").hide((p?"":"slow"))}}).trigger("load");o.on("keyup click load",function(q){p=(q.type==="load");if(!p&&b(this).val()==="yes"){f.attr("aria-hidden","false").show("slow")}else{if(p||((b(this).val()==="no"||b(this).val()===null)&&(m.val()==="no"||m.val()===null))){f.attr("aria-hidden","true").hide((p?"":"slow"))}}}).trigger("click");m.on("keyup click load",function(q){p=(q.type==="load");if(!p&&b(this).val()==="yes"){f.attr("aria-hidden","false").show("slow")}else{if(p||((b(this).val()==="no"||b(this).val()===null)&&(o.val()==="no"||o.val()===null))){f.attr("aria-hidden","true").hide((p?"":"slow"))}}}).trigger("load");h.find("#page").attr("value",e);k.find("input[type=reset]").on("click",function(){d.trigger("load");g.trigger("load");o.trigger("load");m.trigger("load")});return k}};window.pe=a;return a}(jQuery));(function(b){var a=window.pe||{fn:{}};a.fn.formvalid={type:"plugin",depends:["validate","validateAdditional","metadata"],_exec:function(f){var e=f.find("form"),c=false,d;if(pe.language!=="en"){pe.add._load(pe.add.liblocation+"i18n/formvalid/messages_"+pe.language+pe.suffix+".js")}if(pe.language==="de"||pe.language==="nl"||pe.language==="pt"){pe.add._load(pe.add.liblocation+"i18n/formvalid/methods_"+pe.language+pe.suffix+".js")}if(pe.ie>0&&pe.ie<8){e.find(".required").attr("aria-required","true").attr("required","required")}else{e.find(".required").attr("aria-required","true")}if(pe.mobile){e.attr("data-ajax","false").find("input:checkbox").closest("fieldset").attr("data-role","controlgroup")}d=e.validate({meta:"validate",focusInvalid:false,errorElement:"strong",errorPlacement:function(g,h){g.appendTo(e.find('label[for="'+b(h).attr("id")+'"]'))},showErrors:function(k,m){this.defaultShowErrors();var n=e.find("strong.error:not(:hidden)"),l="errors-"+e.attr("id"),h=e.find("#"+l),g;if(n.length>0){if(h.length===0){h=b('<div id="'+l+'" class="errorContainer" role="alert" tabindex="-1"/>').prependTo(e)}else{h.empty()}g=b("<ul></ul>");n.each(function(p){var r=b(this),q='<span class="prefix">'+pe.dic.get("%error")+"&#160;"+(p+1)+pe.dic.get("%colon")+" </span>",o=r.closest("label");r.find("span.prefix").detach();g.append('<li><a href="#'+o.attr("for")+'">'+q+o.find(".field-name").html()+" - "+r.html()+"</a></li>");r.attr("role","alert").prepend('<span class="prefix">'+pe.dic.get("%error")+"&#160;"+(p+1)+pe.dic.get("%colon")+" </span>")});h.append(b("<p>"+pe.dic.get("%form-not-submitted")+this.numberOfInvalids()+(this.numberOfInvalids()!==1?pe.dic.get("%errors-found"):pe.dic.get("%error-found"))+"</p>"));h.append(g);if(c){pe.focus(h)}if(pe.ie===0||pe.ie>7){e.find(".errorContainer a").on("click vclick",function(){var o=pe.focus(b(b(this).attr("href"))).prev().offset().top;if(pe.mobile){b.mobile.silentScroll(o)}else{b(document).scrollTop(o)}return false})}c=false}else{h.detach()}},invalidHandler:function(h,g){c=true},onkeyup:function(g,h){if((h.keyCode<9||h.keyCode>45)&&!h.shiftKey&&(g.name in this.submitted||g===this.lastElement)){this.element(g)}}});e.find("input[type=reset]").on("click",function(){d.resetForm();e.find("#errors-"+e.attr("id")).empty()});return f}};window.pe=a;return a}(jQuery));(function(b){var a=window.pe||{fn:{}};a.fn.lightbox={type:"plugin",depends:["fancybox"],_exec:function(g){var f,c,d,e;e=g.find(".fancybox-wrap");c=g.find(".lightbox").each(function(){b(this).attr("role","dialog").attr("tabindex","0")});f=g.find(".lightbox-group").each(function(){b(this).attr("role","dialog").attr("tabindex","0");return b(this)});d=g.find(".lightbox-item").fancybox().each(function(){b(this).attr("role","button").attr("tabindex","0").click(function(){e.attr("tabindex","0");return e});return b(this)})}};window.pe=a;return a}(jQuery));(function(b){var a=window.pe||{fn:{}};a.fn.mathlib={type:"plugin",support:(function(){var c=false,d,f,e;if(document.createElementNS){d="http://www.w3.org/1998/Math/MathML";f=document.createElement("div");f.style.position="absolute";f.style.color="#fff";e=f.appendChild(document.createElementNS(d,"math")).appendChild(document.createElementNS(d,"mfrac"));e.appendChild(document.createElementNS(d,"mi")).appendChild(document.createTextNode("xx"));e.appendChild(document.createElementNS(d,"mi")).appendChild(document.createTextNode("yy"));document.body.appendChild(f);c=f.offsetHeight>f.offsetWidth;f.style.display="none"}return c}()),_exec:function(c){if(pe.fn.mathlib.support){return}pe.add._load("http://cdn.mathjax.org/mathjax/latest/MathJax.js?config=MML_HTMLorMML")}};window.pe=a;return a}(jQuery));(function(b){var a=window.pe||{fn:{}};a.fn.menubar={type:"plugin",depends:(a.mobile?[]:["resize","equalheights","hoverintent","outside"]),_exec:function(h){if(pe.mobile){return}var c,g,l,m,k,f,d,e;l=b(h);e=function(p){var o,n;o=b(p).closest("li");f();n=o.find(".mb-sm");n.attr("aria-expanded","true").attr("aria-hidden","false").toggleClass("mb-sm mb-sm-open");if((Math.floor(n.offset().left+n.width())-Math.floor(g.offset().left+g.width()))>=-1){n.css("right","0px")}o.addClass("mb-active");return};k=function(p){var o,n;e(p);o=b(p);n=o.closest("li").find(".mb-sm-open");pe.focus(n.find("a[href]:first"));return};d=function(p){var o,n;o=b(p).closest("li");n=o.find(".mb-sm-open");n.attr("aria-expanded","false").attr("aria-hidden","true").toggleClass("mb-sm mb-sm-open").css("right","auto");o.removeClass("mb-active");return};f=function(){c.find(".mb-sm-open").each(function(){var n;n=b(this).closest("li");return d(n)});return};m=function(){var o,n;n=c.children("li:last");o=(n.offset().top+n.outerHeight())-l.offset().top;return l.css("min-height",o)};g=l.children("div");c=g.children("ul");l.attr("role","application");c.attr("role","menubar");pe.resize(m);l.find(".mb-sm").on("click vclick",function(n){if(n.stopPropagation){n.stopPropagation()}else{n.cancelBubble=true}}).parent().find("> :header a").on("click vclick",function(n){if(b(this).closest("li").hasClass("mb-active")){d(this)}else{e(this)}return false});l.on("keydown focus section-next section-previous item-next item-previous close","li",function(t){var r,w,v,s,u,o,q,p,n;w=b(t.target);v=b.map(/\bknav-(\d+)-(\d+)-(\d+)/.exec(w.attr("class")),function(x){return parseInt(x,10)});if(t.type==="keydown"){if(!(t.ctrlKey||t.altKey||t.metaKey)){switch(t.keyCode){case 13:if(v[2]===0&&v[3]===0){w.trigger("item-next");return false}break;case 27:w.trigger("close");return false;case 32:if(v[2]===0&&v[3]===0){w.trigger("item-next")}else{window.location=w.attr("href")}return false;case 37:w.trigger("section-previous");return false;case 38:w.trigger("item-previous");return false;case 39:w.trigger("section-next");return false;case 40:w.trigger("item-next");return false;default:if((t.keyCode>47&&t.keyCode<58)||(t.keyCode>64&&t.keyCode<91)){s=String.fromCharCode(t.keyCode).toLowerCase();u=(v[2]!==0||v[3]!==0);o=w.text();q=c.find(".mb-sm-open a").filter(function(x){return(b(this).text().substring(0,1).toLowerCase()===s||(u&&b(this).text()===o))});if(q.length>0){if(u){q.each(function(x){if(b(this).text()===o){p=x;return false}});if(p<(q.length-1)){pe.focus(q.eq(p+1));return false}}pe.focus(q.eq(0))}return false}}}}else{if(t.type==="close"){pe.focus(l.find(".knav-"+v[1]+"-0-0"));setTimeout(function(){return f()},5)}else{if(t.type==="section-previous"){n=!!v[2]<<1|!!v[3];switch(n){case 0:case 1:r=l.find(".knav-"+(v[1]-1)+"-0-0");if(r.length>0){pe.focus(r)}else{pe.focus(l.find("ul.mb-menu > li:last").find("a:eq(0)"))}break;case 2:case 3:r=l.find(".knav-"+(v[1])+"-"+(v[2]-1)+"-0");if(r.length>0&&v[2]>1){pe.focus(r)}else{r=l.find(".knav-"+(v[1]-1)+"-0-0");if(r.length>0){pe.focus(r)}else{pe.focus(l.find("ul.mb-menu > li:last").find("a:eq(0)"))}}break}}else{if(t.type==="section-next"){n=!!v[2]<<1|!!v[3];switch(n){case 0:case 1:r=l.find(".knav-"+(v[1]+1)+"-0-0");if(r.length>0){pe.focus(r)}else{pe.focus(l.find(".knav-0-0-0"))}break;case 2:case 3:r=l.find(".knav-"+(v[1])+"-"+(v[2]+1)+"-0");if(r.length>0){pe.focus(r)}else{r=l.find(".knav-"+(v[1]+1)+"-0-0");if(r.length>0){pe.focus(r)}else{pe.focus(l.find(".knav-0-0-0"))}}break}}else{if(t.type==="item-next"){r=l.find(".knav-"+v[1]+"-"+(v[2])+"-"+(v[3]+1));if(r.length>0){pe.focus(r)}else{r=l.find(".knav-"+v[1]+"-"+(v[2]+1)+"-0");if(r.length>0){pe.focus(r)}else{pe.focus(l.find(".knav-"+v[1]+"-0-0"))}}}else{if(t.type==="item-previous"){r=l.find(".knav-"+v[1]+"-"+(v[2])+"-"+(v[3]-1));if(r.length>0){pe.focus(r)}else{r=l.find(".knav-"+v[1]+"-"+(v[2]-1)+"-0");if(r.length>0){pe.focus(r)}else{pe.focus(l.find(".knav-"+v[1]+"-0-0"))}}}else{if(t.type==="focusin"&&v[2]===0&&v[3]===0){f();if(w.find(".expandicon").length>0){e(t.target)}return}}}}}}}});b(document).on("click touchstart",function(){l.trigger("focusoutside")});l.on("focusoutside",function(){return f()});l.find("ul.mb-menu > li").find("a:eq(0)").each(function(o,q){var p,n;n=b(q);n.addClass("knav-"+o+"-0-0");p=n.closest("li").find(".mb-sm");if(p.size()>0){n.attr("aria-haspopup","true").addClass("mb-has-sm").wrapInner('<span class="expandicon"><span class="sublink"></span></span>');p.attr("role","menu").attr("aria-expanded","false").attr("aria-hidden","true").find(":has(:header) ul").attr("role","menu");n.append('<span class="wb-invisible">'+(pe.dic.get("%sub-menu-help"))+"</span>");n.closest("li").hoverIntent({over:function(){return e(this)},out:function(){return d(this)},timeout:500});p.find("h4 a").each(function(r){b(this).addClass("knav-"+o+"-"+(r+1)+"-0");b(this).parent().next("ul").find("a").each(function(s){b(this).addClass("knav-"+o+"-"+(r+1)+"-"+(s+1));return});return});p.find("ul").not(function(){return(b(this).prev("h4").length?true:false)}).find("a").each(function(r){b(this).addClass("knav-"+o+"-0-"+(r+1))})}});if(pe.cssenabled){c.find("a").attr("role","menuitem").attr("tabindex","-1").filter(".knav-0-0-0").attr("tabindex","0")}m();return l}};window.pe=a;return a}(jQuery));(function(b){var a=window.pe||{fn:{}};a.fn.share={type:"plugin",depends:["metadata","bookmark"],_exec:function(n){var d,o,c,k,p,m,e,l,f,h,g;d={url:"",sourceTag:"",title:"",description:"",sites:[],compact:false,hint:pe.dic.get("%share-text")+pe.dic.get("%share-hint"),popup:true,popupText:pe.dic.get("%share-text"),hideText:(pe.dic.get("%hide")+" - "),addFavorite:false,favoriteText:pe.dic.get("%favourite"),addEmail:false,emailText:pe.dic.get("%email"),emailSubject:pe.dic.get("%share-email-subject"),emailBody:pe.dic.get("%share-email-body"),manualBookmark:pe.dic.get("%share-manual"),addShowAll:false,showAllText:pe.dic.get("%share-showall"),showAllTitle:pe.dic.get("%share-showall-title"),addAnalytics:false,analyticsName:"/share/{r}/{s}"};o={compact:n.hasClass("compact")?true:undefined,popup:n.hasClass("popup-none")?false:undefined,addFavorite:n.hasClass("favourite")?true:undefined,addEmail:n.hasClass("email")?true:undefined,addShowAll:n.hasClass("showall")?true:undefined,addAnalytics:n.hasClass("analytics")?true:undefined};b.metadata.setType("attr","data-wet-boew");if(typeof wet_boew_share!=="undefined"&&wet_boew_share!==null){b.extend(d,wet_boew_share,o,n.metadata())}else{b.extend(d,o,n.metadata())}n.bookmark(d);if(d.popup&&pe.cssenabled){n.attr("role","application");c=n.find(".bookmark_popup").attr("id","bookmark_popup").attr("aria-hidden","true").attr("role","menu").prepend('<p class="popup_title">'+d.popupText+"</p>");p=c.find("li").attr("role","presentation").find("a").attr("role","menuitem").attr("tabindex","-1");k=n.find(".bookmark_popup_text").off("click");k.attr("role","button").attr("aria-controls","bookmark_popup").attr("aria-pressed","false").on("click keydown",function(q){if(q.type==="keydown"&&(!(q.ctrlKey||q.altKey||q.metaKey))){switch(q.keyCode){case 13:c.trigger("open");return false;case 32:c.trigger("open");return false;case 38:c.trigger("open");return false;case 40:c.trigger("open");return false}}else{if(q.type==="click"){if(b(q.target).attr("aria-pressed")==="false"){c.trigger("open")}else{c.trigger("close")}return false}}});c.on("keydown open close",function(q){if(q.type==="keydown"){if(!(q.ctrlKey||q.altKey||q.metaKey)){switch(q.keyCode){case 9:c.trigger("close");return false;case 27:c.trigger("close");return false;case 37:m=b(q.target).closest("li").prev().find("a");if(m.length===0){m=p}pe.focus(m.last());return false;case 38:e=b(q.target).offset().left;m=b(q.target).closest("li").prevAll().find("a").filter(function(r){return(b(this).offset().left===e)});if(m.length>0){pe.focus(m.first())}else{m=p.filter(function(r){return(b(this).offset().left<e)});if(m.length>0){pe.focus(m.last())}else{e=p.last().offset().left;m=p.filter(function(r){return(b(this).offset().left>e)});if(m.length>0){pe.focus(m.last())}else{pe.focus(p.last())}}}return false;case 39:m=b(q.target).closest("li").next().find("a");if(m.length===0){m=p}pe.focus(m.first());return false;case 40:e=b(q.target).offset().left;m=b(q.target).closest("li").nextAll().find("a").filter(function(r){return(b(this).offset().left===e)});if(m.length>0){pe.focus(m.first())}else{m=p.filter(function(r){return(b(this).offset().left>e)});if(m.length>0){pe.focus(m.first())}else{pe.focus(p.first())}}return false;default:if((q.keyCode>47&&q.keyCode<58)||(q.keyCode>64&&q.keyCode<91)){l=String.fromCharCode(q.keyCode).toLowerCase();f=b(q.target).text();h=p.filter(function(r){return(b(this).text().substring(1,2).toLowerCase()===l||b(this).text()===f)});if(h.length>0){if(b(q.target).hasClass("bookmark_popup_text")){pe.focus(h.eq(0))}else{h.each(function(r){if(b(this).text()===f){g=r;return false}});if(g<(h.length-1)){pe.focus(h.eq(g+1));return false}pe.focus(h.eq(0))}}return false}}}}else{if(q.type==="open"){k.text(d.hideText+d.popupText).attr("aria-pressed","true");pe.focus(c.show().attr("aria-hidden","false").find("li a").first())}else{if(q.type==="close"){pe.focus(k.text(d.popupText).attr("aria-pressed","false").first());c.hide().attr("aria-hidden","true")}}}});b(document).on("click touchstart",function(q){if(c.attr("aria-hidden")==="false"){c.trigger("close")}})}else{n.addClass("popup-none")}return n}};window.pe=a;return a}(jQuery));(function(b){var a=window.pe||{fn:{}};a.fn.tabbedinterface={type:"plugin",depends:(pe.mobile?[]:["metadata","easytabs","equalheights"]),mobile:function(g){var f=g.find(".tabs > li"),d=g.find(".tabs-panel > div"),c=b('<div data-role="collapsible-set" data-content-theme="b" data-theme="b"/>'),k,h=(g.hasClass("tabs-style-4")||g.hasClass("tabs-style-5")),l,m,e=false;g.removeClass();if(h){l=g.closest("section").find(":header:first");m=(l.length>0?(parseInt(l.prop("tagName").substr(1),10)+1):3)}d.each(function(n){k=b('<div data-role="collapsible"/>');if(h){k.append("<h"+m+">"+f.eq(n).children("a").html()+"</h"+m+">"+b(this).html())}else{k.append(b(this).find(":header:first").parent().html())}if(f.eq(n).hasClass("default")){k.attr("data-collapsed","false");e=true}c.append(k)});if(!e){c.children().eq(0).attr("data-collapsed","false")}f.remove();g.empty().append(c);return g},_exec:function(o){if(pe.mobile){return a.fn.tabbedinterface.mobile(o).trigger("create")}var m,z,p,d,h,w,q,s,r,e,c,n,x,t,y,k,l,f,g,u,v;s={panelActiveClass:"active",tabActiveClass:"active",defaultTab:"li:first-child",autoHeight:true,cycle:false,carousel:false,autoPlay:false,animate:false,animationSpeed:"normal",updateHash:false};r={defaultTab:((o.find(".default").length)?".default":undefined),autoHeight:o.hasClass("auto-height-none")?false:undefined,cycle:(o.hasClass("cycle-slow")?8000:(o.hasClass("cycle-fast")?2000:(o.hasClass("cycle")?6000:undefined))),carousel:o.hasClass("style-carousel")?true:undefined,autoPlay:o.hasClass("auto-play")?true:undefined,animate:(o.hasClass("animate")||o.hasClass("animate-slow")||o.hasClass("animate-fast"))?true:undefined,animationSpeed:(o.hasClass("animate-slow")?"slow":(o.hasClass("animate-fast")?"fast":undefined))};b.metadata.setType("attr","data-wet-boew");if(typeof wet_boew_tabbedinterface!=="undefined"&&wet_boew_tabbedinterface!==null){b.extend(s,wet_boew_tabbedinterface,r,o.metadata())}else{b.extend(s,r,o.metadata())}z=o.find(".tabs");d=z.find("li > a");p=o.find(".tabs-panel").children().attr("tabindex","-1");m=(z.find(".default").length>0?z.find(".default"):z.find("li:first-child"));z.attr("role","tablist");z.find("li").each(function(){b(this).attr("role","presentation");return b(this).children("a").each(function(){return b(this).attr("role","tab").attr("aria-selected","false").attr("tabindex","-1").attr("id",b(this).attr("href").substring(1)+"-link").on("click",function(){b(this).parent().parent().children("."+s.tabActiveClass).children("a").each(function(){b(this).attr("aria-selected","false").attr("tabindex","-1");return b("#"+b(this).attr("href").substring(1)).attr("aria-hidden","true")});b(this).attr("aria-selected","true").attr("tabindex","0");return b("#"+b(this).attr("href").substring(1)).attr("aria-hidden","false")})})});p.each(function(){return b(this).attr("role","tabpanel").attr("aria-hidden","true").attr("aria-labelledby",b('a[href*="#'+b(this).attr("id")+'"]').attr("id"))});m.children("a").each(function(){b(this).attr("aria-selected","true").attr("tabindex","0");return b("#"+b(this).attr("href").substring(1)).attr("aria-hidden","false")});z.find("li a").on("focus",function(){p.stop(true,true)});z.find("li a").on("keydown",function(B){if(B.keyCode===13||B.keyCode===32){var A=p.filter(b(this).attr("href"));if(B.stopPropagation){B.stopImmediatePropagation()}else{B.cancelBubble=true}return pe.focus(A)}});o.on("keydown",function(A){if(A.which===37||A.which===38){c(d,p,s,false);A.preventDefault()}else{if(A.which===39||A.which===40){e(d,p,s,false);A.preventDefault()}}});c=function(A,G,F,E){var D,B,C;G.stop(true,true);D=A.filter(function(){return b(this).is("."+F.tabActiveClass)});B=A.eq((A.index(D)-1)+A.size()%A.size());if(F.animate){G.filter("."+F.panelActiveClass).removeClass(F.panelActiveClass).attr("aria-hidden","true").fadeOut(F.animationSpeed,function(){return G.filter("#"+B.attr("href").substr(1)).fadeIn(F.animationSpeed,function(){return b(this).addClass(F.panelActiveClass).attr("aria-hidden","false")})})}else{G.removeClass(F.panelActiveClass).attr("aria-hidden","true").hide();G.filter("#"+B.attr("href").substr(1)).show().addClass(F.panelActiveClass).attr("aria-hidden","false")}A.parent().removeClass(F.tabActiveClass).children().removeClass(F.tabActiveClass).filter("a").attr("aria-selected","false").attr("tabindex","-1");B.parent().addClass(F.tabActiveClass).children().addClass(F.tabActiveClass).filter("a").attr("aria-selected","true").attr("tabindex","0");C=D.parent().siblings(".tabs-toggle");if(!E&&(C.length===0||C.data("state")==="stopped")){return pe.focus(B)}};e=function(A,G,F,E){var D,B,C;G.stop(true,true);D=A.filter(function(){return b(this).is("."+F.tabActiveClass)});B=A.eq((A.index(D)+1)%A.size());if(F.animate){G.filter("."+F.panelActiveClass).removeClass(F.panelActiveClass).attr("aria-hidden","true").fadeOut(F.animationSpeed,function(){return G.filter("#"+B.attr("href").substr(1)).fadeIn(F.animationSpeed,function(){return b(this).addClass(F.panelActiveClass).attr("aria-hidden","false")})})}else{G.removeClass(F.panelActiveClass).attr("aria-hidden","true").hide();G.filter("#"+B.attr("href").substr(1)).show().addClass(F.panelActiveClass).attr("aria-hidden","false")}A.parent().removeClass(F.tabActiveClass).children().removeClass(F.tabActiveClass).filter("a").attr("aria-selected","false").attr("tabindex","-1");B.parent().addClass(F.tabActiveClass).children().addClass(F.tabActiveClass).filter("a").attr("aria-selected","true").attr("tabindex","0");C=D.parent().siblings(".tabs-toggle");if(!E&&(C.length===0||C.data("state")==="stopped")){return pe.focus(B)}};y=function(){if(w.data("state")==="stopped"){e(d,p,s,true);q(d,p,s);h.removeClass(n["class"]).addClass(x["class"]).html(x.text+'<span class="wb-invisible">'+x["hidden-text"]+"</span>").attr("aria-pressed",true);return b(".wb-invisible",h).text(x["hidden-text"])}if(w.data("state")==="started"){return t()}};if(s.autoHeight&&!o.hasClass("tabs-style-4")&&!o.hasClass("tabs-style-5")){p.show();b(".tabs-panel",o).equalHeights(true)}o.easytabs(b.extend({},s,{cycle:false}));if(s.cycle){q=function(A,D,C){var B,E;B=A.filter(function(){return b(this).is("."+C.tabActiveClass)});E=B.siblings(".tabs-roller");o.find(".tabs-toggle").data("state","started");return E.show().animate({width:B.parent().width()},C.cycle-200,"linear",function(){b(this).width(0).hide();e(A,D,C,true);return o.data("interval",setTimeout(function(){return q(A,D,C)},0))})};t=function(){clearTimeout(o.data("interval"));o.find(".tabs-roller").width(0).hide().stop();o.find(".tabs-toggle").data("state","stopped");h.removeClass(x["class"]).addClass(n["class"]).html(n.text+'<span class="wb-invisible">'+n["hidden-text"]+"</span>").attr("aria-pressed",false);return b(".wb-invisible",h).text(n["hidden-text"])};k=b('<li class="tabs-toggle">');u={"class":"tabs-prev",text:"&nbsp;&nbsp;&nbsp;","hidden-text":pe.dic.get("%previous")};f=b('<a class="'+u["class"]+'" href="javascript:;" role="button" aria-pressed="true">'+u.text+'<span class="wb-invisible">'+u["hidden-text"]+"</span></a>");z.append(k.append(f));f.click(function(){c(d,p,s,true)});l=b("<li class='tabs-toggle'>");v={"class":"tabs-next",text:"&nbsp;&nbsp;&nbsp;","hidden-text":pe.dic.get("%next")};g=b('<a class="'+v["class"]+'" href="javascript:;" role="button" aria-pressed="true">'+v.text+'<span class="wb-invisible">'+v["hidden-text"]+"</span></a>");z.append(l.append(g));g.click(function(){e(d,p,s,true)});w=b('<li class="tabs-toggle">');x={"class":"tabs-stop",text:pe.dic.get("%stop"),"hidden-text":pe.dic.get("%tab-rotation","disable")};n={"class":"tabs-start",text:pe.dic.get("%play"),"hidden-text":pe.dic.get("%tab-rotation","enable")};h=b('<a class="'+x["class"]+'" href="javascript:;" role="button" aria-pressed="true">'+x.text+'<span class="wb-invisible">'+x["hidden-text"]+"</span></a>");z.append(w.append(h));w.click(y).bind("keydown",function(A){if(A.keyCode===32){y();return A.preventDefault()}});z.find("li a").not(w.find("a")).click(function(){return t()});d.each(function(){var A;A=b('<div class="tabs-roller">').hide().click(function(){return b(this).siblings("a").click()}).hover(function(){return b(this).css("cursor","text")});if(pe.ie>0&&pe.ie<8){b(".tabs-style-2 .tabs, .tabs-style-2 .tabs li").css("filter","")}return b(this).parent().append(A)});q(d,p,s);if(!s.autoPlay){t()}}o.find('a[href^="#"]').each(function(){var A,B;B=b(this).attr("href");if(B.length>1){A=b(B,p);if(A.length){return b(this).click(function(E){var C,D;C=A.parents('[role="tabpanel"]:hidden');if(C){E.preventDefault();D=C.attr("id");C.parent().siblings(".tabs").find('a[href="#'+D+'"]').trigger("click");return A.get(0).scrollIntoView(true)}})}}});return o.attr("class",o.attr("class").replace(/\bwidget-style-/,"style-"))}};window.pe=a;return a}(jQuery));(function(b){var a=window.pe||{fn:{}};a.fn.texthighlight={type:"plugin",_exec:function(e){var d;function c(h,m){var f,l,g,k=0;h=h.replace(/^\s+|\s+$/g,"");h=h.replace(/\|+/g,"");f=h.split("+");if(f.length>0){h="";for(g=0;g<f.length;g+=1){h+=f[g]+" "}h=h.replace(/^\s+|\s+$|\"|\(|\)/g,"")}h=h.replace(/\s+/g,"|");h=decodeURIComponent(h);h="(?=([^>]*<))([\\s'])?("+h+")(?!>)";l=m.html().replace(new RegExp(h,"gi"),function(q,p,o,n){return o+'<span class="texthighlight"><mark>'+n+"</mark></span>"});m.html(l);return null}if(pe.urlquery.texthighlight!==undefined){c(pe.urlquery.texthighlight,e)}return this}};window.pe=a;return a}(jQuery));(function(b){var a=window.pe||{fn:{}};a.fn.toolbar={scope:"plugin",_exec:function(d){var c=b('<div class="wet-boew-toolbar" role="toolbar"><ul><li class="toolbar-top-page"> <a href="#wb-tphp" role="link">'+pe.dic.get("%top-of-page")+"</a> </li></ul></div>");b("#wb-body-sec-sup, #wb-body-sec, #wb-body").add("body").first().append(c);c.hide();b(window).bind("scroll",function(){if(b(this).scrollTop()>10){c.fadeIn("normal").attr("aria-hidden","false")}else{c.fadeOut("normal").attr("aria-hidden","true")}});if(b(window).scrollTop()<10||b(window).scrollTop()==="undefined"){c.fadeOut("normal").attr("aria-hidden","true")}else{c.fadeIn("normal").attr("aria-hidden","false")}}};window.pe=b.extend(true,window.pe,a);return window.pe}(jQuery));(function(b){var a=window.pe||{fn:{}};a.fn.webwidget={type:"plugin",twitter:{_parse_entries:function(d,e,k){var h,g,c,f;h=(e>0&&e<d.length?e:d.length);f=d.sort(function(m,l){return pe.date.compare(l.created_at.replace("+0000 ","")+" GMT",m.created_at.replace("+0000 ","")+" GMT")});c='<ul class="widget-content">';g=0;while(g<h){c+='<li><a class="float-left" href="http://www.twitter.com/';c+=f[g].user.name+"/status/"+f[g].user.id+'"><img class="widget-avatar" src="'+f[g].user.profile_image_url+'" /></a> ';c+=pe.string.ify.clean(f[g].text);c+=' <span class="widget-datestamp-accent">'+pe.dic.ago(f[g].created_at)+"</span></li>";g+=1}c+="</ul>";return k.replaceWith(c)},_json_request:function(c){if(c.toLowerCase().indexOf("!/search/")>-1){return c.replace("http://","https://").replace(/https:\/\/twitter.com\/#!\/search\/(.+$)/,function(g,f,e,d){return"http://search.twitter.com/search.json?q="+encodeURI(decodeURI(f))})}return c.replace("http://","https://").replace(/https:\/\/twitter.com\/#!\/(.+$)/i,function(g,f,e,d){return"http://twitter.com/status/user_timeline/"+encodeURI(decodeURI(f))+".json?callback=?"})},exec:function(k,e,l){var c,g,h,f,d;h=k.length-1;c=[];f=this._parse_entries;g=k.length-1;d=[];while(g>=0){b.getJSON(this._json_request(k[g]),function(n){var m;m=0;while(m<n.length){c.push(n[m]);m+=1}if(!h){f(c,e,l)}h-=1;return h});d.push(g-=1)}return d}},weather:{_parse_entries:function(d,e,f){var c;c='<ul class="widget-content">';c+='<li><a href="'+d[1].link+'">'+d[1].title+'</a><span class="widget-datestamp">['+pe.date.to_iso_format(d[1].publishedDate,true)+"]</span></li>";c+="</ul>";return f.replaceWith(c)},exec:function(k,e,l){var c,g,h,f,d;h=k.length-1;c=[];f=this._parse_entries;g=k.length-1;d=[];while(g>=0){b.getJSON(this._json_request(k[g]),function(n){var m;m=0;while(m<n.responseData.feed.entries.length){c.push(n.responseData.feed.entries[m]);m+=1}if(!h){f(c,e,l)}h-=1;return h});d.push(g-=1)}return d},_json_request:function(d,c){var e;d=d.replace(/^.*?\.gc\.ca\/([a-z]+).+\/(.*?)_[a-z]+_([ef])\.html/i,"http://www.weatheroffice.gc.ca/rss/$1/$2_$3.xml");e="http://ajax.googleapis.com/ajax/services/feed/load?v=1.0&callback=?&q="+encodeURI(decodeURI(d));if(c>0){e+="&num="+c}return e}},rss:{_parse_entries:function(d,e,k){var h,g,c,f;h=(e>0&&e<d.length?e:d.length);f=d.sort(function(m,l){return pe.date.compare(l.publishedDate,m.publishedDate)});c='<ul class="widget-content">';g=0;while(g<h){c+='<li><a href="'+f[g].link+'">'+f[g].title+'</a><span class="widget-datestamp">['+pe.date.to_iso_format(f[g].publishedDate,true)+"]</span></li>";g+=1}c+="</ul>";return k.replaceWith(c)},exec:function(k,e,l){var c,g,h,f,d;h=k.length-1;c=[];f=this._parse_entries;g=k.length-1;d=[];while(g>=0){b.getJSON(this._json_request(k[g]),function(n){var m;m=0;while(m<n.responseData.feed.entries.length){c.push(n.responseData.feed.entries[m]);m+=1}if(!h){f(c,e,l)}h-=1;return h});d.push(g-=1)}return d},_json_request:function(d,c){var e;e="http://ajax.googleapis.com/ajax/services/feed/load?v=1.0&callback=?&q="+encodeURI(decodeURI(d));if(c>0){e+="&num="+c}return e}},_exec:function(h,g){var f,d,c,e;f=b(h);e=pe.limit(f);c=f.find("a").map(function(){var k;k=b(this).attr("href");if(!g&&/twitter.com/i.test(k)){g="twitter"}if(!g&&/weatheroffice.gc.ca/i.test(k)){g="weather"}if(!g){g="rss"}return b(this).attr("href")});d=b('<ul class="widget-content"><li class="widget-state-loading"><img src="'+pe.add.liblocation+'/images/webfeeds/ajax-loader.gif" alt="'+pe.dic.get("%loading")+'" /></li></ul>');f.find(".widget-content").replaceWith(d);b.extend({},a.fn.webwidget[g]).exec(c,e,d);return}};window.pe=a;return window.pe}(jQuery));(function(b){var a=window.pe||{fn:{}};a.fn.zebra={type:"plugin",_exec:function(f){var c,d,e;if(f.is("table")){c=(f.children("tr").add(f.children("tbody").children("tr"))).filter(function(){return b(this).children("td").length>0});c.filter(":odd").addClass("table-even");c.filter(":even").addClass("table-odd");c.on("hover focusin focusout",function(g){g.stopPropagation();b(this).toggleClass("table-hover")})}else{d=f.children("li");e=(f.parents("li").length+1)%2;d.filter(":odd").addClass(e===0?"list-odd":"list-even");d.filter(":even").addClass(e===1?"list-odd":"list-even");d.on("mouseover mouseout focusin focusout",function(g){g.stopPropagation();b(this).toggleClass("list-hover")})}}};window.pe=a;return a}(jQuery));