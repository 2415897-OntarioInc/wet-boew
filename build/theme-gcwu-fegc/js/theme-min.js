/*!
 * Web Experience Toolkit (WET) / Boîte à outils de l'expérience Web (BOEW)
 * www.tbs.gc.ca/ws-nw/wet-boew/terms / www.sct.gc.ca/ws-nw/wet-boew/conditions
 */
(function(c){var b,a;b=(typeof window.wet_boew_theme!=="undefined"&&window.wet_boew_theme!==null)?window.wet_boew_theme:{fn:{}};a={theme:"theme-gcwu-fegc",psnb:c("#wb-head #gcwu-psnb"),search:c("#wb-head #gcwu-srchbx"),bcrumb:c("#wb-head #gcwu-bc"),title:c("#wb-head #gcwu-title"),sft:c("#wb-foot #gcwu-sft"),footer:c("#wb-foot footer"),gcft:c("#wb-foot #gcwu-gcft"),wmms:c("#gcwu-wmms"),init:function(){pe.theme=b.theme;c("html").addClass(b.theme);if(b.psnb.length>0&&b.search.length===0){b.psnb.css("width","100%")}},themename:function(){return b.theme},buildmenu:function(l,m,g,i){var d=c('<div data-role="controlgroup"></div>'),f,h,e,k,j;f=l.find("> div, > ul, h"+m);if(f.first().is("ul")){d.append(c('<ul data-role="listview" data-theme="'+g+'"></ul>').append(f.first().children("li")))}else{f.each(function(n){var o=c(this);if(o.is("h"+m)){k=o.children("a");e=c('<div data-role="collapsible"'+(k.hasClass("nav-current")?' data-collapsed="false"':"")+"><h"+m+">"+o.text()+"</h"+m+"></div>");if(i){o=o.parent().find("a").eq(1).closest("ul, div, h"+m+1).first();h=o}else{h=o.next()}if(h.is("ul")){if(!i){h.prepend(c("<li></li>").append(o.children("a").html(k.html()+" - "+pe.dic.get("%home"))))}j=h.find("li ul");j.each(function(p){var q=c(this);k=q.prev("a");if((m+1+p)<7){q.attr("data-role","listview").attr("data-theme",g).wrap('<div data-role="collapsible"></div>');q.parent().prepend("<h"+(m+1+p)+">"+k.html()+"</h"+(m+1+p)+">");q.prepend('<li><a href="'+k.attr("href")+'">'+k.html()+" - "+pe.dic.get("%home")+"</a></li>");k.remove()}else{q.attr("data-role","listview").attr("data-theme",g)}});e.append(c('<ul data-role="listview" data-theme="'+g+'"></ul>').append(h.children("li")));e.find("ul").wrap('<div data-role="controlgroup">'+(j.length>0?'<div data-role="collapsible-set" data-theme="'+g+'"></div>':"")+"</div>")}else{e.append(b.buildmenu(o.parent(),m+1,g,false));if(!i){e.find('div[data-role="collapsible-set"]').eq(0).prepend(o.children("a").html(k.html()+" - "+pe.dic.get("%home")).attr("data-role","button").attr("data-theme",g).attr("data-icon","arrow-r").attr("data-iconpos","right"))}}d.append(e)}else{if(o.is("div")){d.append(o.children("a").attr("data-role","button").attr("data-theme",g).attr("data-icon","arrow-r").attr("data-iconpos","right"))}}});d.children().wrapAll('<div data-role="collapsible-set" data-theme="'+g+'"></div>')}return d},mobileview:function(){var m,n,d,e,g,s,o,p,l,f,k,r,q,j,h;if(pe.menubar.length>0){k=pe.menubar.find("ul.mb-menu li");m='<div data-role="page" id="jqm-wb-mb"><div data-role="header">';n=b.psnb.children(":header");m+="<h1>"+n.html()+"</h1></div>";m+='<div data-role="content" data-inset="true"><nav role="navigation">';if(b.bcrumb.length>0){r=k.find('a[href="'+window.location.pathname+'"]');if(r.size()>0){r.eq(0).addClass("nav-current")}else{j=false;q=b.bcrumb.find('li a:not([href^="#"])');if(q.size()>0){h=0;while(h<=q.size()){r=k.find('a[href="'+q.eq(h).attr("href")+'"]');if(r.size()>0){r.eq(0).addClass("nav-current");j=true;break}h+=1}}if(!j){r=k.find('a:contains("'+b.bcrumb.find("li:last-child").text()+'")');if(r.size()>0){r.eq(0).addClass("nav-current")}}}m+='<section><div id="jqm-mb-location-text">'+b.bcrumb.html()+"</div></section>";b.bcrumb.remove()}else{m+='<div id="jqm-mb-location-text"></div>'}if(pe.secnav.length>0){d=b.buildmenu(pe.secnav.find(".wb-sec-def"),3,"c",false);d.find(".nav-current").parents('div[data-role="collapsible"]').attr("data-collapsed","false");m+=c("<section><h2>"+pe.secnav.find("h2").eq(0).html()+"</h2></section>").append(d).html();pe.secnav.remove()}d=b.buildmenu(k,3,"a",true);d.find(".nav-current").parents('div[data-role="collapsible"]').attr("data-collapsed","false");m+=c("<section><h2>"+n.html()+"</h2></section>").append(d).html();m+="</nav></div></div></div>";pe.pagecontainer().append(m);n.wrapInner('<a href="#jqm-wb-mb" data-rel="dialog"></a>');g=c("<ul></ul>").hide().append('<li><a data-rel="dialog" data-theme="b"  data-icon="grid" href="'+n.find("a").attr("href")+'">'+n.find("a").text()+"</a></li>");if(b.search.length>0){e=c('<div data-role="page" id="jqm-wb-search"></div>');e.append(c('<div data-role="header"><h1>'+b.search.find(":header").text()+"</h1></div>")).append(c('<div data-role="content"></div>').append(b.search.find("form").clone()));pe.pagecontainer().append(e);b.search.find(":header").wrapInner('<a href="#jqm-wb-search" data-rel="dialog"></a>');g.append('<li><a data-rel="dialog" data-theme="b" data-icon="search" href="'+b.search.find(":header a").attr("href")+'">'+b.search.find(":header a").text()+"</a></li>")}b.title.after(c('<div data-role="navbar" data-iconpos="right"></div>').append(g))}l=c("body #gcwu-lang");if(l.length>0){s=l.find("a").attr("data-theme","a");f=c('<div data-role="navbar"><ul></ul></div>');p=f.children();s.each(function(){p.append(c("<li/>").append(this))});l.find("#gcwu-ef-lang").replaceWith(f.children().end());l.find("#gcwu-other-lang").remove()}if(b.sft.length>0){s=b.sft.find("#gcwu-sft-in #gcwu-tctr a, #gcwu-sft-in .gcwu-col-head a").attr("data-theme","b");o=c('<div data-role="navbar"><ul></ul></div>');p=o.children();s.each(function(){p.append(c("<li/>").append(this))});b.sft.children("#gcwu-sft-in").replaceWith(o.children().end());b.gcft.parent().remove()}else{if(pe.footer.find("#gcwu-tc").length>0){s=pe.footer.find("#gcwu-tc a").attr("data-theme","b");o=c('<div data-role="navbar"><ul></ul></div>');p=o.children();s.each(function(){p.append(c("<li/>").append(this))});pe.footer.find("#gcwu-tc").replaceWith(o.children().end())}}b.footer.append(b.wmms.detach());c(document).on("mobileinit",function(){if(pe.menubar.length>0){b.psnb.parent().remove();if(b.search.length>0){b.search.parent().remove()}g.show()}});c(document).on("pageinit",function(){c("#jqm-wb-mb").find(".ui-collapsible-set").each(function(){var i=c(this);if(i.find("> ul .ui-collapsible").length>0){i=i.children("ul")}i.children().each(function(){var u=c(this),t=u.is("a")?u:u.find("a").first();if(u.prev().length>0){t.removeClass("ui-corner-top")}if(u.next().length>0){t.removeClass("ui-corner-bottom")}})})});return}};window.wet_boew_theme=c.extend(true,b,a);return window.wet_boew_theme}(jQuery));