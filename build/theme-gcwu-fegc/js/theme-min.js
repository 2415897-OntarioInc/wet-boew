/*!
 * Web Experience Toolkit (WET) / Boîte à outils de l'expérience Web (BOEW)
 * www.tbs.gc.ca/ws-nw/wet-boew/terms / www.sct.gc.ca/ws-nw/wet-boew/conditions
 */
(function(c){var b,a;b=(typeof window.wet_boew_theme!=="undefined"&&window.wet_boew_theme!==null)?window.wet_boew_theme:{fn:{}};a={init:function(){pe.theme="theme-gcwu-fegc";c("html").addClass(pe.theme)},mobileview:function(){var i,k,o,d,j,e,g,n,m,l,h,f;if(pe.menubar.length>0){i='<div data-role="page" id="jqmobile-wet-boew-menubar"><div data-role="header">';k=pe.header.find("#gcwu-psnb > :header");i+="<h1>"+k.html()+"</h1></div>";i+='<div data-role="content" data-inset="true"><nav role="navigation">';o=pe.header.find("#gcwu-bc");if(o.length>0){i+='<div id="jqm-mb-location-text">'+o.html()+"</div>";o.remove()}else{i+='<div id="jqm-mb-location-text"></div>'}if(pe.secnav.length>0){d="<h2>"+pe.secnav.find(":header").eq(0).html()+"</h2>";d+='<div data-role="collapsible-set">';d+=pe.secnav.find(".wb-sec-def").html().replace(/<section>/gi,'<div data-role="collapsible">').replace(/<\/section>/gi,"</div>");d=d.replace(/<h(.*?)>\s*<a/gmi,'<h$1><a class="ui-link" data-icon="arrow-r" data-theme="b"');d=d.replace(/<ul(.*?)>/gi,'<ul data-role="listview"$1>').replace(/<\/ul>/gi,"</ul>");d=d.replace(/<div class=\"top-level\"/gmi,'<div data-role="button" data-icon="arrow-r" class="top-level"');d+="</div>";i+=d;pe.secnav.remove()}i+="<h2>"+k.html()+"</h2>";i+='<div data-role="collapsible-set">';pe.menubar.find("ul.mb-menu").clone().each(function(){c(this).find("div[class^=span]").each(function(){c(this).replaceWith(c(this).html())});c(this).find(".mb-sm").each(function(){c(this).html('<div data-role="collapsible-set">'+c(this).html()+"</div)")});c(this).children().children("div:first-child,h2,h3,h4,section").each(function(){var p=c(this);if(p.is("section")){p=p.children("h2,h3,h4").eq(0)}p.html(p.text());if(p.is("div")){i+='<div data-role="button" data-icon="arrow-r" data-corners="false" class="top-level'+(p.parent().is("li:first-child")?" ui-corner-top":((p.parent().is("li:last-child")?" ui-corner-bottom":"")))+'" data-theme="a">'+c(this).html()+"</div>"}else{p.parent().find("ul").attr("data-role","listview");p.parent().find(".mb-sm div > a,.mb-sm h2,.mb-sm h3,.mb-sm h4").each(function(){var q=c(this),r=q.parent();if(r.is("div")){r.html(r.text());r.attr("data-role","button").attr("data-icon","arrow-r").attr("data-corners","false").attr("data-theme","a").addClass("top-level"+(p.parent().is("li:first-child")?" ui-corner-top":((p.parent().is("li:last-child")?" ui-corner-bottom":""))))}else{if(r.is("section")){q.html(q.text());r.wrap('<div data-role="collapsible" data-theme="a">');r.parent().html(r.html())}}});i+='<div data-role="collapsible" data-theme="a">'+p.parent().html()+"</div>"}})});i+="</nav></div>";i+="</div></div>";pe.pagecontainer().append(i);k.wrapInner('<a href="#jqmobile-wet-boew-menubar" data-rel="dialog"></a>')}j=pe.header.find("#gcwu-srchbx");if(j.length>0){e=c('<div data-role="page" id="jqmobile-wet-boew-search"></div>');e.append(c('<div data-role="header"><h1>'+j.find(":header").text()+"</h1></div>")).append(c('<div data-role="content"></div>').append(j.find("form").clone()));pe.pagecontainer().append(e);j.find(":header").wrapInner('<a href="#jqmobile-wet-boew-search" data-rel="dialog"></a>');g=c("<ul></ul>").hide().append('<li><a data-rel="dialog" data-theme="b"  data-icon="grid" href="'+k.find("a").attr("href")+'">'+k.find("a").text()+"</a></li>").append('<li><a data-rel="dialog" data-theme="b" data-icon="search" href="'+j.find(":header a").attr("href")+'">'+j.find(":header a").text()+"</a></li>");pe.header.find("#gcwu-title").after(c('<div data-role="navbar" data-iconpos="right"></div>').append(g))}h=c("#gcwu-lang");if(h.length>0){n=h.find("a").attr("data-theme","a");f=c('<div data-role="navbar"><ul></ul></div>');l=f.children();n.each(function(){l.append(c("<li/>").append(this))});h.find("#gcwu-ef-lang").replaceWith(f.children().end());h.find("#gcwu-other-lang").remove()}if(pe.footer.find("#gcwu-sft").length>0){n=pe.footer.find("#gcwu-sft-in #gcwu-tctr a, #gcwu-sft-in .gcwu-col-head a").attr("data-theme","b");m=c('<div data-role="navbar"><ul></ul></div>');l=m.children();n.each(function(){l.append(c("<li/>").append(this))});pe.footer.find("#gcwu-sft-in").replaceWith(m.children().end());pe.footer.find("#gcwu-gcft").parent().remove()}else{if(pe.footer.find("#gcwu-tc").length>0){n=pe.footer.find("#gcwu-tc a").attr("data-theme","b");m=c('<div data-role="navbar"><ul></ul></div>');l=m.children();n.each(function(){l.append(c("<li/>").append(this))});pe.footer.find("#gcwu-tc").replaceWith(m.children().end())}}pe.footer.find("footer").append(c("#gcwu-wmms").detach());c(document).on("mobileinit",function(){if(pe.menubar.length>0){pe.header.find("#gcwu-psnb").parent().remove()}if(j.length>0){j.parent().remove();g.show()}});c(document).on("pageinit",function(){});return}};window.wet_boew_theme=c.extend(true,b,a);return window.wet_boew_theme}(jQuery));