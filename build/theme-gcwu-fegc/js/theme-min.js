/*!
 * Web Experience Toolkit (WET) / Boîte à outils de l'expérience Web (BOEW)
 * www.tbs.gc.ca/ws-nw/wet-boew/terms / www.sct.gc.ca/ws-nw/wet-boew/conditions
 */
(function(c){var b,a;b=(typeof window.wet_boew_theme!=="undefined"&&window.wet_boew_theme!==null)?window.wet_boew_theme:{fn:{}};a={theme:"theme-gcwu-fegc",psnb:c("#wb-head #gcwu-psnb"),search:c("#wb-head #gcwu-srchbx"),bcrumb:c("#wb-head #gcwu-bc"),title:c("#wb-head #gcwu-title"),sft:c("#wb-foot #gcwu-sft"),footer:c("#wb-foot footer"),gcft:c("#wb-foot #gcwu-gcft"),wmms:c("#gcwu-wmms"),init:function(){pe.theme=b.theme;c("html").addClass(b.theme);if(b.psnb.length>0&&b.search.length===0){b.psnb.css("width","100%")}},themename:function(){return b.theme},buildmenu:function(i,f,h){var k=c('<div data-role="controlgroup"></div>'),j,e,g,d;j=i.find("> div, > ul, h"+f);if(j.first().is("ul")){k.append(c('<ul data-role="listview" data-theme="'+h+'"></ul>').append(j.first().children("li")))}else{j.each(function(l){if(c(this).is("h"+f)){g=c('<div data-role="collapsible"><h'+f+">"+c(this).text()+"</h"+f+"></div>");e=c(this).next();d=c(this).children("a");if(e.is("ul")){e.prepend('<li><a href="'+d.attr("href")+'">'+d.html()+" - "+pe.dic.get("%home")+"</a></li>");e.find("li ul").each(function(m){d=c(this).prev("a");c(this).attr("data-role","listview").attr("data-theme",h).wrap('<div data-role="collapsible"></div>');c(this).parent().prepend("<h"+(f+1+m)+">"+d.html()+"</h"+(f+1+m)+">");c(this).prepend('<li><a href="'+d.attr("href")+'">'+d.html()+" - "+pe.dic.get("%home")+"</a></li>");d.remove()});g.append(c('<ul data-role="listview" data-theme="'+h+'"></ul>').append(e.children("li")));g.find("ul").wrap('<div data-role="controlgroup"></div>')}else{g.append(b.buildmenu(c(this).parent(),f+1,h));g.find('div[data-role="collapsible-set"]').eq(0).prepend(c(this).children("a").attr("href",d.attr("href")).html(d.html()+" - "+pe.dic.get("%home")).attr("data-role","button").attr("data-theme",h).attr("data-icon","arrow-r").attr("data-iconpos","right"))}k.append(g)}else{if(c(this).is("div")){k.append(c(this).children("a").attr("data-role","button").attr("data-theme",h).attr("data-icon","arrow-r").attr("data-iconpos","right"))}}});k.children().wrapAll('<div data-role="collapsible-set" data-theme="'+h+'"></div>')}return k},mobileview:function(){var h,i,d,f,l,m,j,k,g,e,n;if(pe.menubar.length>0){h='<div data-role="page" id="jqmobile-wet-boew-menubar"><div data-role="header">';i=b.psnb.children(":header");h+="<h1>"+i.html()+"</h1></div>";h+='<div data-role="content" data-inset="true"><nav role="navigation">';if(b.bcrumb.length>0){h+='<div id="jqm-mb-location-text">'+b.bcrumb.html()+"</div>";b.bcrumb.remove()}else{h+='<div id="jqm-mb-location-text"></div>'}if(pe.secnav.length>0){h+=c("<div><h2>"+pe.secnav.find("h2").eq(0).html()+"</h2></div>").append(b.buildmenu(pe.secnav.find(".wb-sec-def"),3,"c")).html();pe.secnav.remove()}h+="<h2>"+i.html()+"</h2>";h+='<div data-role="collapsible-set" data-theme="a">';pe.menubar.find("ul.mb-menu").clone().each(function(){c(this).find("div[class^=span]").each(function(){c(this).replaceWith(c(this).html())});c(this).find(".mb-sm").each(function(){c(this).html('<div data-role="collapsible-set" data-theme="a">'+c(this).html()+"</div)")});c(this).children().children("div:first-child,h2,h3,h4,section").each(function(){var o=c(this);if(o.is("section")){o=o.children("h2,h3,h4").eq(0)}if(o.is("div")){h+='<div data-role="button" data-icon="arrow-r" data-iconpos="right" data-corners="false" data-theme="a" class="top-level'+(o.parent().is("li:first-child")?" ui-corner-top":((o.parent().is("li:last-child")?" ui-corner-bottom":"")))+'">'+o.text()+"</div>"}else{o.parent().find("ul").attr("data-role","listview");o.parent().find(".mb-sm div > a,.mb-sm h2,.mb-sm h3,.mb-sm h4").each(function(){var q=c(this),r=q.parent(),p;if(r.is("div")){r.html(r.text());r.attr("data-role","button").attr("data-icon","arrow-r").attr("data-iconpos","right").attr("data-corners","false").attr("data-theme","a").addClass("top-level"+(o.parent().is("li:first-child")?" ui-corner-top":((o.parent().is("li:last-child")?" ui-corner-bottom":""))))}else{if(r.is("section")){p=q.children("a");q.next("ul").prepend('<li><a href="'+p.attr("href")+'">'+p.html()+" - "+pe.dic.get("%home")+"</a></li>");r.wrap('<div data-role="collapsible">');q.html(q.text());r.parent().html(r.html())}}});o.html(o.text());h+='<div data-role="collapsible">'+o.parent().html()+"</div>"}})});h+="</nav></div>";h+="</div></div>";pe.pagecontainer().append(h);i.wrapInner('<a href="#jqmobile-wet-boew-menubar" data-rel="dialog"></a>');f=c("<ul></ul>").hide().append('<li><a data-rel="dialog" data-theme="b"  data-icon="grid" href="'+i.find("a").attr("href")+'">'+i.find("a").text()+"</a></li>");if(b.search.length>0){d=c('<div data-role="page" id="jqmobile-wet-boew-search"></div>');d.append(c('<div data-role="header"><h1>'+b.search.find(":header").text()+"</h1></div>")).append(c('<div data-role="content"></div>').append(b.search.find("form").clone()));pe.pagecontainer().append(d);b.search.find(":header").wrapInner('<a href="#jqmobile-wet-boew-search" data-rel="dialog"></a>');f.append('<li><a data-rel="dialog" data-theme="b" data-icon="search" href="'+b.search.find(":header a").attr("href")+'">'+b.search.find(":header a").text()+"</a></li>")}b.title.after(c('<div data-role="navbar" data-iconpos="right"></div>').append(f))}g=c("body #gcwu-lang");if(g.length>0){m=g.find("a").attr("data-theme","a");e=c('<div data-role="navbar"><ul></ul></div>');k=e.children();m.each(function(){k.append(c("<li/>").append(this))});g.find("#gcwu-ef-lang").replaceWith(e.children().end());g.find("#gcwu-other-lang").remove()}if(b.sft.length>0){m=b.sft.find("#gcwu-sft-in #gcwu-tctr a, #gcwu-sft-in .gcwu-col-head a").attr("data-theme","b");j=c('<div data-role="navbar"><ul></ul></div>');k=j.children();m.each(function(){k.append(c("<li/>").append(this))});b.sft.children("#gcwu-sft-in").replaceWith(j.children().end());b.gcft.parent().remove()}else{if(pe.footer.find("#gcwu-tc").length>0){m=pe.footer.find("#gcwu-tc a").attr("data-theme","b");j=c('<div data-role="navbar"><ul></ul></div>');k=j.children();m.each(function(){k.append(c("<li/>").append(this))});pe.footer.find("#gcwu-tc").replaceWith(j.children().end())}}b.footer.append(b.wmms.detach());c(document).on("mobileinit",function(){if(pe.menubar.length>0){b.psnb.parent().remove();if(b.search.length>0){b.search.parent().remove()}f.show()}});c(document).on("pageinit",function(){n=c("#jqmobile-wet-boew-menubar .ui-collapsible");n.filter(function(){return c(this).prev().length>0}).find("a").removeClass("ui-corner-top");n.filter(function(){return c(this).next().length>0}).find("a").removeClass("ui-corner-bottom")});return}};window.wet_boew_theme=c.extend(true,b,a);return window.wet_boew_theme}(jQuery));